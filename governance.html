<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Governance - QubeNode Validator</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    
    <!-- Meta Tags -->
    <meta name="description" content="QubeNode internal governance voting system - Participate in validator decision making">
    <meta name="theme-color" content="#00D4FF">
    
    <!-- Governance Styles - CSP Compliant -->
    <link rel="stylesheet" href="styles-governance.css">
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation"></div>
    <div class="grid-overlay"></div>
    
    <div class="container">
        <!-- Header -->
        <div class="governance-header">
            <a href="index.html" class="btn-header btn-home">To main</a>
            
            <h1 class="governance-title">Governance Voting</h1>
            <p class="governance-subtitle">Internal voting system to shape QubeNode's position on network proposals</p>
            
            <div class="header-actions">
                <button id="connectWalletBtn" class="btn-header btn-connect">Connect Wallet to Vote</button>
                <button id="disconnectWalletBtn" class="btn-header btn-disconnect" style="display: none;">Disconnect</button>
            </div>
        </div>
        
        <!-- Wallet Info Bar (shown after connection) -->
        <div class="wallet-info-bar" id="walletInfoBar">
            <div class="wallet-info-item">
                <span class="wallet-info-label">Connected Address</span>
                <span class="wallet-info-value" id="connectedAddress">-</span>
            </div>
            <div class="wallet-info-item">
                <span class="wallet-info-label">Delegated to QubeNode</span>
                <span class="wallet-info-value" id="delegatedAmount">0.000 TICS</span>
            </div>
            <div class="wallet-info-item">
                <span class="wallet-info-label">Your Voting Power</span>
                <span class="wallet-info-value voting-power-highlight" id="votingPower">0.000 TICS</span>
            </div>
        </div>
        
        <!-- Info Box -->
        <div class="info-box">
            <div class="info-box-title">About Internal Governance</div>
            <div class="info-box-text">
                This is QubeNode's internal voting system. Your vote helps us determine our position on network governance proposals. 
                Voting power is based on your delegation to QubeNode. Your voice matters in shaping our validator decisions!
            </div>
        </div>
        
        <!-- Proposals Section -->
        <div class="proposals-section">
            <div class="section-header">
                <h2 class="section-title">Active & Recent Proposals</h2>
            </div>
            
            <!-- Loading State -->
            <div id="loadingContainer" class="loading-container">
                <div class="loading-spinner"></div>
                <div class="loading-text">Loading proposals...</div>
            </div>
            
            <!-- Proposals List (populated by JS) -->
            <div id="proposalsList" style="display: none;"></div>
            
            <!-- Empty State (shown when no proposals) -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-state-icon">üó≥Ô∏è</div>
                <div class="empty-state-title">No Active Proposals</div>
                <div class="empty-state-text">Check back later for new governance proposals!</div>
            </div>
        </div>
    </div>
    
    <!-- Wallet Selection Modal -->
    <div id="walletModal" class="wallet-modal" style="display: none;">
        <div class="wallet-modal-overlay"></div>
        <div class="wallet-modal-content">
            <div class="wallet-modal-header">
                <h2 class="wallet-modal-title">Connect Wallet</h2>
                <button id="closeModalBtn" class="wallet-modal-close">‚úï</button>
            </div>
            
            <div class="wallet-modal-body">
                <p class="wallet-modal-subtitle">Choose your preferred wallet to connect</p>
                
                <div class="wallet-options">
                    <button class="wallet-option" data-wallet="keplr">
                        <div class="wallet-option-icon">
                            <img src="/keplr.png" alt="Keplr" class="wallet-logo">
                        </div>
                        <div class="wallet-option-info">
                            <div class="wallet-option-name">Keplr</div>
                            <div class="wallet-option-desc">Browser extension wallet</div>
                        </div>
                    </button>
                    
                    <button class="wallet-option" data-wallet="cosmostation">
                        <div class="wallet-option-icon">
                            <img src="/Cosmostation.png" alt="Cosmostation" class="wallet-logo">
                        </div>
                        <div class="wallet-option-info">
                            <div class="wallet-option-name">Cosmostation</div>
                            <div class="wallet-option-desc">Mobile & browser wallet</div>
                        </div>
                    </button>
                    
                    <button class="wallet-option" data-wallet="metamask">
                        <div class="wallet-option-icon">
                            <img src="/metamask-fox.svg" alt="MetaMask" class="wallet-logo">
                        </div>
                        <div class="wallet-option-info">
                            <div class="wallet-option-name">MetaMask</div>
                            <div class="wallet-option-desc">EVM-compatible wallet</div>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Vote Confirmation Modal -->
    <div id="voteConfirmModal" class="vote-confirm-modal" style="display: none;">
        <div class="vote-confirm-overlay"></div>
        <div class="vote-confirm-content">
            <div class="vote-confirm-header">
                <div class="vote-confirm-icon">üó≥Ô∏è</div>
                <h3 class="vote-confirm-title">Confirm Your Vote</h3>
            </div>
            
            <div class="vote-confirm-body">
                <p class="vote-confirm-text">You are about to vote:</p>
                <div class="vote-confirm-choice" id="voteConfirmChoice">YES</div>
                <p class="vote-confirm-details">
                    <span class="vote-confirm-label">Voting Power:</span>
                    <span class="vote-confirm-value" id="voteConfirmPower">0.000 TICS</span>
                </p>
            </div>
            
            <div class="vote-confirm-actions">
                <button id="voteConfirmCancel" class="vote-confirm-btn vote-confirm-cancel">Cancel</button>
                <button id="voteConfirmOk" class="vote-confirm-btn vote-confirm-ok">Confirm Vote</button>
            </div>
        </div>
    </div>
    
    <!-- Toast Container -->
    <div id="toastContainer"></div>
    
    <!-- Ethers.js for MetaMask -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.umd.min.js"></script>
    
    <!-- Cosmos Chain Dependencies -->
    <script src="chain-config.js"></script>
    <script src="wallet-manager.js"></script>
    <script src="chain-client.js"></script>
    
    <!-- MetaMask Connector -->
    <script src="metamask-connector.js"></script>
    
    <!-- Governance Logic -->
    <script src="init-governance.js"></script>
</body>
</html>
