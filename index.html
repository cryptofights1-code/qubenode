<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QubeNode - Валідатор Qubetics</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- Android Chrome Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#00D4FF">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="QubeNode">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="QubeNode - стабільний та надійний валідатор мережі Qubetics. Uptime 100%, комісія 5%, APY 30%. Делегуйте $TICS та отримуйте винагороди.">
    <meta name="keywords" content="QubeNode, Qubetics, валідатор, TICS, стейкінг, делегування, blockchain, crypto">
    <meta name="author" content="QubeNode">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://qubenode.space/">
    <meta property="og:title" content="QubeNode - Валідатор Qubetics">
    <meta property="og:description" content="Стабільний та надійний валідатор мережі Qubetics. Uptime 100%, комісія 5%, APY 30%. Делегуйте $TICS та отримуйте винагороди.">
    <meta property="og:image" content="https://qubenode.space/android-chrome-512x512.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://qubenode.space/">
    <meta property="twitter:title" content="QubeNode - Валідатор Qubetics">
    <meta property="twitter:description" content="Стабільний та надійний валідатор мережі Qubetics. Uptime 100%, комісія 5%, APY 30%.">
    <meta property="twitter:image" content="https://qubenode.space/android-chrome-512x512.png">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #000000;
            background-color: #000000 !important;
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            position: static !important;
        }

        html {
            background: #000000;
            background-color: #000000 !important;
        }

        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background: radial-gradient(ellipse at 50% 50%, rgba(0, 212, 255, 0.15) 0%, transparent 50%),
                        radial-gradient(ellipse at 80% 20%, rgba(0, 255, 240, 0.15) 0%, transparent 50%),
                        radial-gradient(ellipse at 20% 80%, rgba(0, 128, 255, 0.15) 0%, transparent 50%);
            animation: bgShift 20s ease infinite;
            pointer-events: none;
        }

        @keyframes bgShift {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(5deg); }
        }

        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: 1;
            pointer-events: none;
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Hamburger Menu Styles */
        .hamburger {
            display: none;
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 99999 !important;
            width: 35px;
            height: 35px;
            background: rgba(0, 212, 255, 0.4);
            border: 2px solid rgba(0, 212, 255, 0.8);
            border-radius: 8px;
            cursor: pointer;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 4px;
            transition: all 0.3s ease;
            pointer-events: auto !important;
            -webkit-tap-highlight-color: rgba(0, 212, 255, 0.3);
            touch-action: manipulation;
            outline: none;
        }

        .hamburger span {
            display: block;
            width: 18px;
            height: 2px;
            background: #00FFF0;
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .hamburger:active {
            background: rgba(0, 212, 255, 0.6);
            transform: scale(0.95);
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        .mobile-menu {
            display: none;
            position: fixed;
            top: 0;
            left: -100%;
            width: 80%;
            max-width: 320px;
            height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            border-right: 2px solid rgba(0, 212, 255, 0.3);
            z-index: 99998;
            padding: 80px 30px 30px;
            overflow-y: auto;
            transition: left 0.3s ease;
            box-shadow: 5px 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .mobile-contact-icons {
            display: none;
        }

        /* Fixed contact icons for mobile */
        .fixed-mobile-contacts {
            display: none;
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 99999;
            gap: 12px;
        }

        .fixed-contact-icon {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s ease;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            background: transparent;
            border: none;
            border-radius: 12px;
        }

        .fixed-contact-icon svg {
            width: 50px;
            height: 50px;
            filter: drop-shadow(0 2px 6px rgba(0, 212, 255, 0.5));
            transition: all 0.3s ease;
        }

        .fixed-contact-icon:active {
            transform: scale(0.95);
        }

        .fixed-contact-icon:active svg {
            filter: drop-shadow(0 2px 8px rgba(0, 212, 255, 0.7));
        }

        .mobile-menu.active {
            left: 0;
        }

        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 99997;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .mobile-menu-overlay.active {
            pointer-events: auto;
        }

        .mobile-menu-overlay.active {
            opacity: 1;
        }

        /* CSS-only menu toggle with checkbox */
        #menu-toggle:checked ~ .mobile-menu {
            left: 0;
        }

        #menu-toggle:checked ~ .mobile-menu-overlay {
            display: block;
            opacity: 1;
            pointer-events: auto;
        }

        #menu-toggle:checked ~ label.hamburger span:nth-child(1) {
            transform: rotate(45deg) translate(8px, 8px);
        }

        #menu-toggle:checked ~ label.hamburger span:nth-child(2) {
            opacity: 0;
        }

        #menu-toggle:checked ~ label.hamburger span:nth-child(3) {
            transform: rotate(-45deg) translate(8px, -8px);
        }

        /* Base styles для фіксації іконок на мобільних */
        .hamburger {
            position: fixed !important;
            top: 20px !important;
            left: 20px !important;
            z-index: 999999 !important;
        }

        .fixed-mobile-contacts {
            position: fixed !important;
            top: 20px !important;
            right: 20px !important;
            display: none;
            flex-direction: row !important;
            gap: 15px !important;
            z-index: 999998 !important;
        }

        .fixed-contact-icon {
            width: 50px;
            height: 50px;
            background: transparent;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .fixed-contact-icon svg {
            width: 50px;
            height: 50px;
        }

        .fixed-contact-icon:active,
        .fixed-contact-icon:hover {
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .fixed-mobile-contacts {
                display: flex !important;
            }
            
            /* EXCHANGES MOBILE OVERRIDE - WORKS IN MODALS */
            .exchanges-container {
                height: 100px !important;
            }
            
            .exchanges-container a {
                height: 100px !important;
            }
            
            .exchanges-container img {
                height: 100px !important;
                max-height: 100px !important;
            }
            
            .exchanges-container a:nth-child(3) img {
                transform: translateY(-3px) !important;
            }
        }

        .mobile-menu-items {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .mobile-menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px 20px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 15px;
            color: #ffffff;
            text-decoration: none;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            width: 100%;
            text-align: left;
        }

        .mobile-menu-item span {
            pointer-events: none;
        }

        .mobile-menu-item:hover,
        .mobile-menu-item:active {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid rgba(0, 212, 255, 0.5);
            transform: translateX(-5px);
        }

        .contact-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 50%;
            color: #ffffff;
            text-decoration: none;
            font-size: 24px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .contact-icon span {
            pointer-events: none;
        }

        .contact-icon:hover,
        .contact-icon:active {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid rgba(0, 212, 255, 0.5);
            transform: scale(1.1);
        }
        .mobile-menu-item:active {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid rgba(0, 212, 255, 0.5);
            transform: translateX(-5px);
        }

        .top-left-menu {
            position: absolute;
            top: 30px;
            left: 40px;
            right: 420px;
            z-index: 10;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: nowrap;
        }

        .ecosystem-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 50px;
            color: #ffffff;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            outline: none;
            white-space: nowrap;
            height: 40px;
        }

        .ecosystem-button span {
            line-height: 1;
        }

        .ecosystem-button:hover {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid rgba(0, 212, 255, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }

        /* Header Wallet Button */
        .header-wallet-button {
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(0, 255, 240, 0.15));
            border: 2px solid rgba(0, 212, 255, 0.5);
            border-radius: 50px;
            color: #00FFF0;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            outline: none;
            white-space: nowrap;
            height: 40px;
        }

        .header-wallet-button:hover {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.3), rgba(0, 255, 240, 0.25));
            border-color: rgba(0, 212, 255, 0.7);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        .wallet-dropdown {
            position: absolute;
            top: calc(100% + 10px);
            left: 0;
            min-width: 220px;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            border: 2px solid rgba(0, 212, 255, 0.4);
            border-radius: 12px;
            padding: 10px;
            display: none !important;
            flex-direction: column;
            gap: 8px;
            z-index: 1000;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.2s ease, visibility 0.2s ease;
        }

        .wallet-dropdown.show {
            display: flex !important;
            visibility: visible;
            opacity: 1;
        }

        .wallet-option {
            padding: 12px 16px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            color: #00FFF0;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .wallet-option:hover {
            background: rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.5);
            transform: translateX(5px);
        }

        .wallet-connected {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.15));
            border-color: rgba(34, 197, 94, 0.5);
        }

        .wallet-connected:hover {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(22, 163, 74, 0.25));
            border-color: rgba(34, 197, 94, 0.7);
        }

        .wallet-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .wallet-address {
            font-size: 0.85em;
            color: #94a3b8;
        }

        .wallet-balance {
            font-size: 0.95em;
            color: #22c55e;
            font-weight: 700;
        }

        .top-contacts {
            position: absolute;
            top: 30px;
            right: 10px;
            display: flex;
            gap: 15px;
            z-index: 10;
            align-items: center;
        }

        .contact-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(0, 255, 240, 0.15));
            border: none;
            border-radius: 50px;
            color: #ffffff;
            text-decoration: none;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.2);
            white-space: nowrap;
            height: 44px;
        }

        .contact-link span {
            line-height: 1;
        }

        .contact-link:hover {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.3), rgba(0, 255, 240, 0.25));
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 212, 255, 0.4);
        }

        .contact-link svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }

        header {
            text-align: center;
            padding: 40px 20px 60px;
        }

        .qubetics-brand {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px;
            margin-bottom: 60px;
            margin-top: 80px;
            opacity: 0;
            transform: translateY(-30px);
            animation: fadeInDown 1s ease-out 0.3s forwards;
        }

        @keyframes fadeInDown {
            to {
                opacity: 0.8;
                transform: translateY(0);
            }
        }

        .qubetics-brand img {
            width: 120px;
            height: 120px;
            border-radius: 20px;
            filter: drop-shadow(0 0 30px rgba(0, 212, 255, 0.5));
        }

        .qubetics-brand span {
            font-size: 3.5em;
            color: #94a3b8;
            font-weight: 800;
            letter-spacing: 3px;
        }

        .brand-container {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin-bottom: 35px;
            position: relative;
            opacity: 0;
            transform: scale(0.8);
            animation: zoomIn 1s ease-out 0.8s forwards;
        }

        @keyframes zoomIn {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .brand-container img {
            width: 200px;
            height: 200px;
            border-radius: 22px;
            filter: drop-shadow(0 0 25px rgba(0, 212, 255, 0.7));
        }

        .validator-name {
            font-size: 10em;
            font-weight: 800;
            background: linear-gradient(135deg, #00FFB3 0%, #00D4FF 25%, #6366F1 50%, #A855F7 75%, #FFD60A 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -2px;
            line-height: 1;
        }

        .subtitle {
            font-size: 1.4em;
            color: #94a3b8;
            margin-bottom: 40px;
            font-weight: 300;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s ease-out 1.3s forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: rgba(34, 197, 94, 0.1);
            border: 2px solid rgba(34, 197, 94, 0.4);
            padding: 14px 32px;
            border-radius: 100px;
            font-weight: 600;
            font-size: 1.1em;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 1s ease-out 1.6s forwards;
        }

        .status-badge::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.2), transparent);
            animation: statusShine 3s infinite;
        }

        @keyframes statusShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .status-dot {
            width: 12px;
            height: 12px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s infinite;
            box-shadow: 0 0 20px #22c55e;
        }

        /* Extended Status Badge with Inline Blocks */
        .status-badge-extended {
            max-width: 650px;
            margin: 0 auto;
            padding: 16px 25px;
            background: rgba(34, 197, 94, 0.1);
            border: 2px solid rgba(34, 197, 94, 0.4);
            border-radius: 80px;
            position: relative;
            overflow: hidden;
        }

        .status-badge-extended::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.2), transparent);
            animation: statusShine 3s infinite;
        }

        .status-badge-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            font-weight: 600;
            font-size: 1em;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
        }

        .block-info {
            color: #94a3b8;
            font-size: 0.8em;
            font-weight: 500;
        }

        .block-info span {
            color: #00FFF0;
            font-weight: 700;
        }

        .blocks-chain-inline {
            display: flex;
            gap: 0;
            overflow: hidden;
            height: 30px;
            position: relative;
            z-index: 1;
            flex: 1;
            min-width: 0;
        }

        .blocks-track-inline {
            display: flex;
            gap: 8px;
            align-items: flex-end;
            height: 30px;
            width: 100%;
            max-width: 100%;
            overflow: visible;
        }


        .chain-block {
            width: 6px;
            height: 28px;
            background: linear-gradient(180deg, #22c55e 0%, #16a34a 100%);
            border-radius: 3px;
            flex-shrink: 0;
            transition: all 0.3s ease;
            opacity: 0.6;
            box-shadow: 0 2px 6px rgba(34, 197, 94, 0.3);
            transition: opacity 0.3s ease;
        }

        .chain-block.fresh {
            opacity: 1 !important;
            background: linear-gradient(180deg, #10b981 0%, #059669 100%) !important;
            box-shadow: 0 0 20px rgba(16, 185, 129, 1), 0 0 30px rgba(5, 150, 105, 0.8), 0 0 40px rgba(5, 150, 105, 0.5) !important;
            animation: blockPulse 0.6s ease-out !important;
            transform: scaleY(1.2) !important;
        }

        @keyframes blockPulse {
            0% {
                transform: scaleY(0.3);
                opacity: 0.3;
                box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
                background: linear-gradient(180deg, #34d399 0%, #10b981 100%);
            }
            50% {
                transform: scaleY(1.3);
                opacity: 1;
                box-shadow: 0 0 25px rgba(16, 185, 129, 1), 0 0 35px rgba(5, 150, 105, 1), 0 0 45px rgba(5, 150, 105, 0.6);
                background: linear-gradient(180deg, #6ee7b7 0%, #34d399 100%);
            }
            100% {
                transform: scaleY(1);
                opacity: 1;
                box-shadow: 0 0 16px rgba(74, 222, 128, 1), 0 0 24px rgba(34, 197, 94, 0.6);
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 60px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.05) 0%, rgba(0, 255, 240, 0.05) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 20px;
            padding: 35px;
            transition: all 0.4s;
            opacity: 0;
            transform: translateY(30px);
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .stat-card:nth-child(1) { animation: cardFadeIn 0.6s ease-out 2s forwards; }
        .stat-card:nth-child(2) { animation: cardFadeIn 0.6s ease-out 2.15s forwards; }
        .stat-card:nth-child(3) { animation: cardFadeIn 0.6s ease-out 2.3s forwards; }
        .stat-card:nth-child(4) { animation: cardFadeIn 0.6s ease-out 2.45s forwards; }
        .stat-card:nth-child(5) { animation: cardFadeIn 0.6s ease-out 2.6s forwards; }
        .stat-card:nth-child(6) { animation: cardFadeIn 0.6s ease-out 2.75s forwards; }
        .stat-card:nth-child(7) { animation: cardFadeIn 0.6s ease-out 2.9s forwards; }
        .stat-card:nth-child(8) { animation: cardFadeIn 0.6s ease-out 3.05s forwards; }

        @keyframes cardFadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-card:hover {
            transform: translateY(-8px);
            border-color: rgba(0, 212, 255, 0.5);
            box-shadow: 0 20px 60px rgba(0, 212, 255, 0.3);
        }

        .stat-label {
            font-size: 0.95em;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .stat-value {
            font-size: 2.8em;
            font-weight: 800;
            background: linear-gradient(135deg, #00FFF0 0%, #00D4FF 50%, #0080FF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .stat-subvalue {
            font-size: 0.9em;
            color: #64748b;
            font-weight: 400;
            margin-top: auto;
        }

        .info-section {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.03) 0%, rgba(0, 255, 240, 0.03) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 212, 255, 0.15);
            border-radius: 24px;
            padding: 50px;
            margin: 50px 0;
        }

        .info-section h2 {
            font-size: 2.5em;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #00FFF0 0%, #00D4FF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 25px 0;
            border-bottom: 1px solid rgba(0, 212, 255, 0.1);
            gap: 30px;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            color: #94a3b8;
            font-weight: 600;
            min-width: 200px;
        }

        .info-value {
            color: #e0e7ff;
            font-weight: 500;
            text-align: right;
        }

        footer {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
            border-top: 1px solid rgba(0, 212, 255, 0.1);
            margin-top: 80px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 100000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.95);
        }

        .modal.show {
            display: block;
        }

        .modal-content {
            background: linear-gradient(135deg, #0a0e27 0%, #000000 100%);
            margin: 0;
            padding: 0;
            width: 100%;
            min-height: 100vh;
        }

        /* Centered modal for validator selector */
        #validatorSelectorModal.show {
            display: flex !important;
            align-items: center;
            justify-content: center;
        }
        
        #validatorSelectorModal .modal-content {
            position: relative;
            margin: 0;
            padding: 30px;
            width: 90%;
            max-width: 650px;
            max-height: 85vh;
            overflow-y: auto;
            border-radius: 20px;
            border: 2px solid rgba(0, 212, 255, 0.4);
            background: linear-gradient(135deg, #0a0e27 0%, #000814 100%);
        }

        .modal-header {
            padding: 40px 60px;
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 3em;
            background: linear-gradient(135deg, #00FFF0 0%, #00D4FF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        .close-button {
            font-size: 2.5em;
            color: #94a3b8;
            cursor: pointer;
            background: rgba(0, 212, 255, 0.1);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(0, 212, 255, 0.3);
            position: relative;
        }

        .close-button:active {
            background: rgba(0, 212, 255, 0.3);
            transform: scale(0.95);
        }

        .close-button:hover {
            color: #00FFF0;
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 60px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .modal-body h3 {
            font-size: 2.2em;
            color: #00D4FF;
            margin: 40px 0 20px 0;
            font-weight: 700;
        }

        .modal-body h3:first-child {
            margin-top: 0;
        }

        .modal-body p {
            color: #cbd5e1;
            font-size: 1.15em;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .tech-item {
            background: rgba(0, 212, 255, 0.05);
            padding: 25px;
            border-left: 4px solid #00D4FF;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .tech-item-title {
            color: #00FFF0;
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .calc-input {
            width: 100%;
            padding: 18px 25px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 12px;
            color: #ffffff;
            font-size: 1em;
            font-weight: 600;
            outline: none;
            margin-bottom: 20px;
        }
        
        .calc-input::placeholder {
            font-size: 0.9em;
            color: rgba(148, 163, 184, 0.7);
        }

        .calc-input:focus {
            border-color: rgba(0, 212, 255, 0.6);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .calc-button {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #00D4FF 0%, #00FFF0 100%);
            border: none;
            border-radius: 12px;
            color: #000;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .calc-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.5);
        }

        .results {
            display: none;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid rgba(0, 212, 255, 0.3);
        }

        .result-item {
            background: rgba(0, 212, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            text-align: center;
        }

        .result-label {
            color: #94a3b8;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .result-value {
            color: #00D4FF;
            font-size: 1.8em;
            font-weight: 800;
        }

        .result-usd {
            color: #64748b;
            font-size: 0.95em;
            margin-top: 5px;
        }

        /* FAQ Accordion Styles */
        .faq-item {
            background: rgba(0, 212, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            margin-bottom: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .faq-item:hover {
            border-color: rgba(0, 212, 255, 0.4);
            background: rgba(0, 212, 255, 0.08);
        }

        .faq-question {
            width: 100%;
            padding: 20px 25px;
            background: transparent;
            border: none;
            color: #ffffff;
            font-size: 1.1em;
            font-weight: 600;
            text-align: left;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .faq-question:hover {
            color: #00D4FF;
        }

        .faq-icon {
            font-size: 1.5em;
            color: #00D4FF;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }

        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
            padding: 0 25px;
        }

        .faq-item.active .faq-answer {
            max-height: 1000px;
            padding: 0 25px 20px 25px;
        }

        .faq-answer p {
            color: #cbd5e1;
            line-height: 1.8;
            margin: 0;
        }

        .faq-answer strong {
            color: #00FFF0;
        }

        /* Medium screens - adjust menu layout */
        @media (max-width: 1100px) {
            .top-left-menu {
                flex-wrap: wrap;
                max-width: 600px;
            }
            
            .ecosystem-button, .header-wallet-button {
                font-size: 0.9em;
                padding: 10px 16px;
                height: 40px;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex !important;
                pointer-events: auto !important;
            }

            .hamburger span {
                width: 30px !important;
                height: 3.5px !important;
                background: linear-gradient(135deg, #00FFB3 0%, #00D4FF 25%, #6366F1 50%, #A855F7 75%, #FFD60A 100%) !important;
                border-radius: 2px !important;
                box-shadow: 0 2px 6px rgba(0, 212, 255, 0.5) !important;
            }

            .mobile-menu {
                display: block;
            }

            .mobile-contact-icons {
                display: flex !important;
            }

            .fixed-mobile-contacts {
                display: flex !important;
            }

            .container {
                position: relative;
                z-index: 1;
            }

            .top-left-menu, .top-contacts {
                display: none;
            }

            .container {
                padding: 15px;
                padding-top: 70px;
            }

            header {
                padding: 10px 15px 30px;
                text-align: center;
            }

            .qubetics-brand {
                flex-direction: row;
                justify-content: center;
                gap: 15px;
                margin-bottom: 30px;
                margin-top: 0;
            }

            .qubetics-brand img {
                width: 60px;
                height: 60px;
            }

            .qubetics-brand span {
                font-size: 1.1em;
                letter-spacing: 1px;
            }

            .brand-container {
                flex-direction: row;
                justify-content: center;
                gap: 15px;
                margin-bottom: 15px;
            }

            .brand-container img {
                width: 70px;
                height: 70px;
            }

            .validator-name {
                font-size: 3em;
                letter-spacing: -1px;
                text-align: center;
            }

            .subtitle {
                font-size: 0.95em;
                text-align: center;
                padding: 0;
                margin-bottom: 20px;
            }

            .status-badge {
                font-size: 0.9em;
                padding: 10px 20px;
                display: inline-flex;
                margin: 0 auto;
            }

            .status-badge-extended {
                max-width: 100%;
                padding: 12px 15px;
            }

            .status-badge-header {
                flex-direction: column;
                gap: 8px;
                font-size: 0.85em;
                margin-bottom: 10px;
                align-items: center;
            }

            .block-info {
                font-size: 0.75em;
                text-align: center;
            }

            .blocks-chain-inline {
                height: 28px;
                flex: 1;
            }

            .blocks-track-inline {
                gap: 3px;
                height: 28px;
                max-width: 100%;
            }

            .chain-block {
                width: 7px;
                height: 40px;
            }

            /* ВАЖЛИВО: fresh анімація на мобільних - ДУЖЕ ЯСКРАВА */
            .chain-block.fresh {
                background: linear-gradient(180deg, #6ee7b7 0%, #10b981 100%) !important;
                box-shadow: 0 0 30px rgba(110, 231, 183, 1), 
                            0 0 40px rgba(16, 185, 129, 1), 
                            0 0 50px rgba(5, 150, 105, 0.8) !important;
                animation: blockPulse 0.6s ease-out !important;
                transform: scaleY(1.3) !important;
            }
            
            @keyframes blockPulse {
                0% {
                    transform: scaleY(0.3);
                    opacity: 0.5;
                    background: linear-gradient(180deg, #a7f3d0 0%, #6ee7b7 100%);
                    box-shadow: 0 0 40px rgba(167, 243, 208, 1);
                }
                50% {
                    transform: scaleY(1.5);
                    opacity: 1;
                    background: linear-gradient(180deg, #6ee7b7 0%, #34d399 100%);
                    box-shadow: 0 0 50px rgba(110, 231, 183, 1), 
                                0 0 60px rgba(52, 211, 153, 1);
                }
                100% {
                    transform: scaleY(1);
                    opacity: 1;
                    background: linear-gradient(180deg, #22c55e 0%, #16a34a 100%);
                    box-shadow: 0 0 15px rgba(34, 197, 94, 0.6);
                }
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                margin: 20px 0 40px 0;
            }

            .stat-card {
                padding: 20px 15px;
                text-align: center;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                min-height: 140px;
            }

            .stat-label {
                font-size: 0.75em;
                text-align: center;
                margin-bottom: 10px;
            }

            .stat-value {
                font-size: 1.6em;
                text-align: center;
                word-break: break-word;
            }

            .stat-subvalue {
                font-size: 0.75em;
                text-align: center;
                line-height: 1.3;
            }

            .features {
                grid-template-columns: 1fr;
                gap: 20px;
                margin: 50px 0;
            }

            .feature-card {
                padding: 25px 20px;
                text-align: left;
            }

            .feature-icon {
                font-size: 2.5em;
            }

            .feature-card h3 {
                font-size: 1.3em;
                text-align: left;
            }

            .feature-card p {
                font-size: 0.95em;
                text-align: left;
            }

            .info-section {
                padding: 30px 20px;
                text-align: left;
            }

            .info-section h2 {
                font-size: 1.8em;
                text-align: left;
            }

            .info-row {
                flex-direction: column;
                gap: 10px;
                padding: 20px 0;
            }

            .info-label,
            .info-value {
                text-align: left;
                min-width: auto;
            }

            .cta-section {
                padding: 40px 20px;
                margin: 50px 0;
                text-align: left;
            }

            .cta-section h2 {
                font-size: 1.8em;
                margin-bottom: 15px;
                text-align: left;
            }

            .cta-section p {
                font-size: 1em;
                margin-bottom: 30px;
                text-align: left;
            }

            .cta-buttons {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                padding: 15px 30px;
                font-size: 0.95em;
                width: 100%;
                justify-content: center;
            }

            footer {
                padding: 40px 20px;
            }

            /* Exchanges на мобільних - вирівнювання та оптимізація */
            #ticsModal h3:has(+ .exchanges-container) {
                margin-top: 15px !important;
                margin-bottom: 12px !important;
            }

            .exchanges-container {
                flex-direction: row !important;
                gap: 12px !important;
                padding: 0 !important;
                flex-wrap: nowrap !important;
                overflow-x: visible !important;
                align-items: center !important;
                justify-content: space-around !important;
                display: flex !important;
                margin: 0 auto 15px auto !important;
                height: 100px !important;
            }

            .exchanges-container a {
                flex: 1 1 0 !important;
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                min-width: 0 !important;
                padding: 0 !important;
                margin: 0 !important;
                background: transparent !important;
                border: none !important;
                transition: all 0.3s ease !important;
                height: 100px !important;
            }

            .exchanges-container a:active {
                transform: scale(0.95);
            }

            .exchanges-container img {
                width: auto !important;
                height: 100px !important;
                max-height: 100px !important;
                max-width: 100% !important;
                object-fit: contain !important;
                object-position: center !important;
                margin: 0 auto !important;
                padding: 0 !important;
                display: block !important;
                align-self: center !important;
                vertical-align: middle !important;
            }
            
            /* Спеціальне вирівнювання для Coinstore */
            .exchanges-container a:nth-child(3) img {
                transform: translateY(-3px) !important;
            }
            
            /* Наступний заголовок після бірж */
            .exchanges-container + h3 {
                margin-top: 0 !important;
            }

            .footer-links {
                flex-direction: column;
                gap: 15px;
                align-items: center;
            }

            .modal-content {
                width: 95%;
                max-width: 95%;
                max-height: 90vh;
            }

            .modal-header, .modal-body {
                padding: 20px;
            }

            .modal-body {
                padding: 25px 20px;
            }

            .modal-body > div[style*="grid"] {
                display: flex !important;
                flex-direction: column !important;
                gap: 25px !important;
            }

            .modal-body > div[style*="grid"] > div {
                width: 100% !important;
                padding: 20px;
                background: rgba(0, 212, 255, 0.05);
                border: 1px solid rgba(0, 212, 255, 0.2);
                border-radius: 16px;
                margin-bottom: 0 !important;
            }

            .modal-body > div[style*="grid"] > div > div:first-child {
                font-size: 1.2em !important;
                margin-bottom: 15px !important;
                padding-bottom: 10px;
                border-bottom: 2px solid rgba(0, 212, 255, 0.3);
            }

            .modal-body p {
                margin-bottom: 20px;
                line-height: 1.7;
            }

            .modal-body h3 {
                margin-top: 35px;
                padding-top: 20px;
                border-top: 1px solid rgba(0, 212, 255, 0.2);
            }

            .modal-body h3:first-child {
                margin-top: 0;
                padding-top: 0;
                border-top: none;
            }

            .modal-footer {
                padding: 20px !important;
                flex-direction: row !important;
                gap: 10px !important;
                flex-wrap: nowrap !important;
                align-items: stretch !important;
            }

            .modal-link {
                font-size: 0.75em !important;
                padding: 12px 10px !important;
                flex: 1 1 0 !important;
                min-width: 0 !important;
                max-width: 48% !important;
                justify-content: center;
                white-space: normal !important;
                text-align: center;
                line-height: 1.3;
                gap: 6px !important;
            }
            
            .modal-link span {
                display: inline-block;
            }
            
            .modal-link span:first-child {
                font-size: 1.1em;
            }

            .modal-header h2 {
                font-size: 1.5em;
                line-height: 1.3;
            }

            .modal-body h3 {
                font-size: 1.3em;
                margin: 30px 0 15px 0;
                font-weight: 700;
            }

            .modal-body p, .modal-body li {
                font-size: 1em;
                line-height: 1.7;
            }

            .modal-body ul {
                padding-left: 20px;
                margin: 15px 0;
            }

            .modal-body li {
                margin: 12px 0;
                line-height: 1.6;
            }

            .modal-body strong {
                color: #00FFF0;
                font-weight: 700;
            }

            .modal-body [style*="background: rgba(0, 212, 255"] {
                padding: 20px !important;
                margin: 20px 0 !important;
                border-radius: 12px !important;
            }

            .close-modal {
                font-size: 2em;
                width: 35px;
                height: 35px;
            }

            /* FAQ Mobile Styles */
            .faq-question {
                padding: 15px 18px;
                font-size: 1em;
                gap: 10px;
            }

            .faq-icon {
                font-size: 1.2em;
            }

            .faq-answer {
                padding: 0 18px;
            }

            .faq-item.active .faq-answer {
                padding: 0 18px 15px 18px;
            }

            .faq-answer p {
                font-size: 0.95em;
                line-height: 1.6;
            }

            .faq-answer ul {
                padding-left: 18px;
                margin: 10px 0;
            }

            .faq-answer li {
                margin: 8px 0;
                font-size: 0.95em;
            }

            /* Примітка про делегування через комп'ютер */
            div[style*="linear-gradient(135deg, rgba(0, 212, 255, 0.1)"] {
                padding: 20px !important;
                margin: 30px 0 !important;
            }

            div[style*="linear-gradient(135deg, rgba(0, 212, 255, 0.1)"] h4 {
                font-size: 1.1em !important;
            }

            div[style*="linear-gradient(135deg, rgba(0, 212, 255, 0.1)"] p {
                font-size: 0.95em !important;
            }

            div[style*="linear-gradient(135deg, rgba(0, 212, 255, 0.1)"] a {
                padding: 12px 16px !important;
                font-size: 0.9em !important;
            }

            /* Кроки делегування (1-5) */
            div[style*="width: 40px; height: 40px"] {
                width: 35px !important;
                height: 35px !important;
                font-size: 1.1em !important;
            }

            div[style*="margin-left: 55px"] {
                margin-left: 45px !important;
            }

            /* Контейнер з кроками */
            div[style*="background: rgba(0, 212, 255, 0.03)"] {
                padding: 25px 15px !important;
            }

            /* Гаманці список */
            div[style*="display: flex; align-items: center; gap: 12px; padding: 15px"] {
                padding: 12px !important;
                gap: 10px !important;
            }

            /* Посилання на біржі в FAQ */
            .faq-answer a {
                font-size: 0.95em !important;
                padding: 2px 0 !important;
                display: inline-block;
            }

            /* Примітка блок з посиланнями */
            div[style*="background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 255, 240, 0.05))"] {
                padding: 20px 15px !important;
                margin: 30px 0 !important;
            }

            div[style*="background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 255, 240, 0.05))"] h4 {
                font-size: 1.1em !important;
                margin-bottom: 12px !important;
            }

            div[style*="background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 255, 240, 0.05))"] p {
                font-size: 0.9em !important;
                margin-bottom: 15px !important;
            }

            div[style*="background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 255, 240, 0.05))"] a {
                padding: 12px 15px !important;
                font-size: 0.85em !important;
                gap: 8px !important;
            }
            
            /* Staking Interface Styles */
            #stakingInterface button:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
            }
            
            #stakingInterface button:active {
                transform: translateY(0);
            }
            
            #stakingInterface input:focus {
                outline: none;
                border-color: #00FFF0;
                box-shadow: 0 0 0 3px rgba(0, 255, 240, 0.1);
            }

            /* Закрити button */
            .close-button {
                width: 45px !important;
                height: 45px !important;
                font-size: 2em !important;
            }

            /* Розділ "Чому обрати QubeNode" на головній */
            .info-row .info-value {
                font-size: 0.95em !important;
            }

            /* Extended Badge Mobile */
            .status-badge-extended {
                max-width: calc(100% - 30px);
                padding: 6px 10px !important;
                border-radius: 16px !important;
                margin-bottom: 10px !important;
            }

            .status-badge-header {
                flex-direction: row;
                gap: 8px !important;
                font-size: 0.85em !important;
                margin-bottom: 4px !important;
                justify-content: center;
                align-items: center;
            }

            .block-info {
                font-size: 0.6em !important;
            }

            .blocks-chain-inline {
                height: 22px !important;
                gap: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
                display: flex !important;
            }

            .blocks-track-inline {
                gap: 4px !important;
                width: 100% !important;
                max-width: 100% !important;
                height: 22px !important;
            }

            .chain-block {
                width: 4px !important;
                height: 20px !important;
                min-width: 4px !important;
                border-radius: 2px !important;
            }

            .blocks-chain-inline::before,
            .blocks-chain-inline::after {
                width: 30px !important;
            }

            /* Фіксація гамбургер меню та іконок */
            .hamburger {
                position: fixed !important;
                top: 20px !important;
                left: 20px !important;
                display: flex !important;
                z-index: 999999 !important;
            }

            .fixed-mobile-contacts {
                position: fixed !important;
                top: 20px !important;
                right: 20px !important;
                display: flex !important;
                flex-direction: row !important;
                gap: 15px !important;
                z-index: 999998 !important;
            }

            .fixed-contact-icon {
                width: 50px !important;
                height: 50px !important;
                background: transparent !important;
                border: none !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                transition: all 0.3s ease !important;
            }

            .fixed-contact-icon svg {
                width: 50px !important;
                height: 50px !important;
            }

            .fixed-contact-icon:active,
            .fixed-contact-icon:hover {
                transform: scale(1.1) !important;
            }

            /* Приховати десктопні контакти на мобільних */
            .top-contacts {
                display: none !important;
            }

            .top-left-menu {
                display: none !important;
            }

            /* === КАЛЬКУЛЯТОР НА МОБІЛЬНИХ === */
            #calcModal .modal-content {
                max-width: 100% !important;
                width: 100% !important;
                margin: 0 !important;
            }

            #calcModal .modal-body > div[style*="background: rgba(0, 212, 255"] {
                padding: 20px !important;
            }

            /* Швидкий вибір кнопок */
            #calcModal button[onclick^="setAmount"] {
                padding: 8px 12px !important;
                font-size: 0.85em !important;
                flex: 1 1 auto !important;
                min-width: 80px !important;
            }

            /* Input поля */
            #calcModal .calc-input,
            #calcModal input[type="number"],
            #calcModal select {
                width: 100% !important;
                font-size: 0.85em !important;
                padding: 12px !important;
            }
            
            #calcModal .calc-input::placeholder,
            #calcModal input[type="number"]::placeholder {
                font-size: 0.85em !important;
                color: rgba(148, 163, 184, 0.6) !important;
            }

            /* Grid з полями вводу */
            #calcModal div[style*="grid-template-columns"] {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }

            /* Результати - картки */
            #calcModal #calcResults > div:first-child {
                grid-template-columns: 1fr !important;
                gap: 12px !important;
            }

            #calcModal #calcResults > div:first-child > div {
                padding: 15px !important;
            }

            #calcModal #calcResults > div:first-child > div > div:first-child {
                font-size: 0.85em !important;
            }

            #calcModal #calcResults > div:first-child > div > div:nth-child(2) {
                font-size: 1.3em !important;
            }

            #calcModal #calcResults > div:first-child > div > div:nth-child(3) {
                font-size: 0.8em !important;
            }

            /* Детальний розрахунок */
            #calcModal div[style*="Детальний розрахунок"] {
                padding: 20px !important;
            }

            #calcModal div[style*="Детальний розрахунок"] h4 {
                font-size: 1.1em !important;
                margin-bottom: 15px !important;
            }

            #calcModal div[style*="Детальний розрахунок"] > div > div {
                padding: 10px 0 !important;
                font-size: 0.9em !important;
            }

            #calcModal div[style*="Детальний розрахунок"] > div > div span:first-child {
                font-size: 0.85em !important;
            }

            #calcModal div[style*="Детальний розрахунок"] > div > div span:last-child {
                font-size: 0.9em !important;
            }

            /* Порівняння compound */
            #calcModal #compoundComparison {
                padding: 20px !important;
            }

            #calcModal #compoundComparison h4 {
                font-size: 1.1em !important;
            }

            #calcModal #compoundComparison > div {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }
        }

        /* Максимальний пріоритет для фіксації іконок */
        @media (max-width: 768px) {
            body .hamburger,
            body label.hamburger[for="menu-toggle"] {
                position: fixed !important;
                top: 20px !important;
                left: 20px !important;
                z-index: 999999 !important;
            }

            body .fixed-mobile-contacts,
            body div.fixed-mobile-contacts {
                position: fixed !important;
                top: 20px !important;
                right: 20px !important;
                z-index: 999998 !important;
                flex-direction: row !important;
            }
        }

        /* === MOBILE CALCULATOR STYLES === */
        @media (max-width: 768px) {
            /* Modal width */
            #calcModal .modal-content {
                max-width: 95% !important;
                margin: 10px auto !important;
                max-height: 90vh;
                overflow-y: auto;
            }

            /* Modal body padding */
            #calcModal .modal-body {
                padding: 15px !important;
            }

            #calcModal .modal-body > div {
                padding: 20px !important;
            }

            /* Header */
            #calcModal .modal-header h2 {
                font-size: 1.3em !important;
            }

            /* Preset buttons - 2 columns on mobile */
            #calcModal .modal-body > div > div:first-child > div {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                gap: 8px !important;
            }

            #calcModal .modal-body > div > div:first-child > div button {
                padding: 12px 10px !important;
                font-size: 0.85em !important;
                white-space: nowrap;
            }

            /* Input fields - single column */
            #calcModal .modal-body > div > div:nth-child(2) {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }

            /* Inputs styling */
            #calcModal input.calc-input,
            #calcModal select.calc-input {
                font-size: 16px !important; /* Prevent zoom on iOS */
                padding: 12px !important;
            }

            /* Results cards - single column */
            #calcResults > div:first-child {
                grid-template-columns: 1fr !important;
                gap: 12px !important;
            }

            /* Result cards */
            #calcResults > div:first-child > div {
                padding: 15px !important;
            }

            #calcResults > div:first-child > div > div:nth-child(2) {
                font-size: 1.3em !important;
            }

            /* Detailed breakdown */
            #calcResults > div:nth-child(2) {
                padding: 20px !important;
            }

            #calcResults > div:nth-child(2) h4 {
                font-size: 1.1em !important;
            }

            #calcResults > div:nth-child(2) > div > div {
                font-size: 0.9em !important;
                padding: 10px 0 !important;
            }

            /* Comparison section */
            #compoundComparison {
                padding: 20px !important;
            }

            #compoundComparison h4 {
                font-size: 1.1em !important;
            }

            #compoundComparison > div:first-child {
                grid-template-columns: 1fr !important;
                gap: 15px !important;
            }

            #compoundComparison > div:first-child > div > div:nth-child(2) {
                font-size: 1.2em !important;
            }

            /* Labels */
            #calcModal label {
                font-size: 0.9em !important;
            }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
            #calcModal .modal-header h2 {
                font-size: 1.1em !important;
            }

            /* Preset buttons font */
            #calcModal .modal-body > div > div:first-child > div button {
                font-size: 0.75em !important;
                padding: 10px 8px !important;
            }

            /* Result values */
            #calcResults > div:first-child > div > div:nth-child(2) {
                font-size: 1.2em !important;
            }

            /* Comparison values */
            #compoundComparison > div:first-child > div > div:nth-child(2) {
                font-size: 1.1em !important;
            }
        }
    </style>
    
    <!-- КРИТИЧНИЙ STYLE - МАКСИМАЛЬНИЙ ПРІОРИТЕТ ДЛЯ ФІКСАЦІЇ -->
    <style>
        /* АБСОЛЮТНА ФІКСАЦІЯ - НАЙВИЩИЙ ПРІОРИТЕТ */
        @media (max-width: 768px) {
            body .hamburger,
            body label.hamburger,
            body [for="menu-toggle"].hamburger,
            html body .hamburger,
            html body label.hamburger {
                display: flex !important;
                position: fixed !important;
                top: 20px !important;
                left: 20px !important;
                bottom: auto !important;
                right: auto !important;
                width: 50px !important;
                height: 50px !important;
                z-index: 999999 !important;
                background: transparent !important;
                border: none !important;
                border-radius: 0 !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                gap: 6px !important;
                padding: 0 !important;
                margin: 0 !important;
                transform: none !important;
                translate: none !important;
                inset: 20px auto auto 20px !important;
            }
            
            body .hamburger span,
            html body .hamburger span {
                width: 30px !important;
                height: 3.5px !important;
                background: linear-gradient(135deg, #00FFB3 0%, #00D4FF 25%, #6366F1 50%, #A855F7 75%, #FFD60A 100%) !important;
                display: block !important;
                border-radius: 2px !important;
                pointer-events: none !important;
            }
            
            body .fixed-mobile-contacts,
            body div.fixed-mobile-contacts,
            html body .fixed-mobile-contacts,
            html body div.fixed-mobile-contacts {
                display: flex !important;
                position: fixed !important;
                top: 20px !important;
                right: 20px !important;
                bottom: auto !important;
                left: auto !important;
                z-index: 999998 !important;
                flex-direction: row !important;
                gap: 15px !important;
                padding: 0 !important;
                margin: 0 !important;
                transform: none !important;
                translate: none !important;
                inset: 20px 20px auto auto !important;
            }

            body .fixed-mobile-contacts *,
            html body .fixed-mobile-contacts * {
                position: static !important;
            }
        }

        @media (min-width: 769px) {
            /* Ховати мобільні іконки на десктопі */
            #mobile-icons-container {
                display: none !important;
            }
            
            .hamburger { display: none !important; }
            .fixed-mobile-contacts { display: none !important; }
            
            /* Ховати весь контейнер з мобільними іконками на десктопі */
            #mobile-icons-container {
                display: none !important;
            }
        }
        
        /* Ховати іконки коли модальне вікно відкрите */
        .modal.show ~ div .hamburger,
        .modal.show ~ div .fixed-mobile-contacts {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- КОНТЕЙНЕР ДЛЯ ІКОНОК - ТІЛЬКИ ВГОРІ САЙТУ -->
    <div id="mobile-icons-container" style="position: absolute !important; top: 0 !important; left: 0 !important; right: 0 !important; width: 100% !important; height: 80px !important; z-index: 999999 !important; pointer-events: none !important; margin: 0 !important; padding: 0 !important;">
        <!-- Hamburger Menu - ЗЛІВА -->
        <label for="menu-toggle" class="hamburger" style="position: absolute !important; top: 20px !important; left: 20px !important; pointer-events: auto !important; display: flex !important; width: 50px !important; height: 50px !important; flex-direction: column !important; justify-content: center !important; align-items: center !important; gap: 6px !important; background: transparent !important; border: none !important; z-index: 1000000 !important;">
            <span style="display: block !important; width: 30px !important; height: 3.5px !important; background: linear-gradient(135deg, #00FFB3 0%, #00D4FF 25%, #6366F1 50%, #A855F7 75%, #FFD60A 100%) !important; border-radius: 2px !important;"></span>
            <span style="display: block !important; width: 30px !important; height: 3.5px !important; background: linear-gradient(135deg, #00FFB3 0%, #00D4FF 25%, #6366F1 50%, #A855F7 75%, #FFD60A 100%) !important; border-radius: 2px !important;"></span>
            <span style="display: block !important; width: 30px !important; height: 3.5px !important; background: linear-gradient(135deg, #00FFB3 0%, #00D4FF 25%, #6366F1 50%, #A855F7 75%, #FFD60A 100%) !important; border-radius: 2px !important;"></span>
        </label>

        <!-- Fixed Mobile Контакти Icons - СПРАВА ГОРИЗОНТАЛЬНО -->
        <div class="fixed-mobile-contacts" style="position: absolute !important; top: 20px !important; right: 20px !important; display: flex !important; flex-direction: row !important; gap: 15px !important; pointer-events: auto !important; z-index: 1000000 !important;">
            <a href="https://t.me/+sRnz7RyoL4Q0MWEy" class="fixed-contact-icon" target="_blank">
                <svg viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 25L18 27.5L21 37L27 30L36 37L39 12L10 25Z" stroke="url(#iconGrad)" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                    <path d="M18 27.5L21 32" stroke="url(#iconGrad)" stroke-width="3.5" stroke-linecap="round"/>
                    <path d="M21 37V32" stroke="url(#iconGrad)" stroke-width="3.5" stroke-linecap="round"/>
                    <path d="M18 27.5L31 17" stroke="url(#iconGrad)" stroke-width="3.5" stroke-linecap="round"/>
                    <defs>
                        <linearGradient id="iconGrad" x1="0" y1="0" x2="50" y2="50" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#00FFB3"/>
                            <stop offset="25%" stop-color="#00D4FF"/>
                            <stop offset="50%" stop-color="#6366F1"/>
                            <stop offset="75%" stop-color="#A855F7"/>
                            <stop offset="100%" stop-color="#FFD60A"/>
                        </linearGradient>
                    </defs>
                </svg>
            </a>
            <a href="/cdn-cgi/l/email-protection#a5d3c4c9ccc1c4d1cad78bd4d0c7c0cbcac1c0e5c2c8c4ccc98bc6cac8" class="fixed-contact-icon">
                <svg viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="11" y="16" width="28" height="18" rx="2" stroke="url(#iconGrad2)" stroke-width="3.5" fill="none"/>
                    <path d="M11 19L25 28L39 19" stroke="url(#iconGrad2)" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <defs>
                        <linearGradient id="iconGrad2" x1="0" y1="0" x2="50" y2="50" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#00FFB3"/>
                            <stop offset="25%" stop-color="#00D4FF"/>
                            <stop offset="50%" stop-color="#6366F1"/>
                            <stop offset="75%" stop-color="#A855F7"/>
                            <stop offset="100%" stop-color="#FFD60A"/>
                        </linearGradient>
                    </defs>
                </svg>
            </a>
        </div>
    </div>

    <div class="bg-animation"></div>
    <div class="grid-overlay"></div>

    <!-- CSS-ONLY Menu Toggle -->
    <input type="checkbox" id="menu-toggle" style="display: none;">

    <!-- Mobile Menu Overlay -->
    <label for="menu-toggle" class="mobile-menu-overlay" id="menuOverlay"></label>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-items">
            <button class="mobile-menu-item" data-modal="ecosystemModal" type="button">
                <span>🌐</span>
                <span>Про Екосистему</span>
            </button>
            <button class="mobile-menu-item" data-modal="ticsModal" type="button">
                <span>💎</span>
                <span>Монета TICS</span>
            </button>
            <button class="mobile-menu-item" data-modal="calcModal" type="button">
                <span>🧮</span>
                <span>Калькулятор</span>
            </button>
            <button class="mobile-menu-item" data-modal="delegatorModal" type="button">
                <span>🤝</span>
                <span>Стати делегатором</span>
            </button>
            <button class="mobile-menu-item" data-modal="faqModal" type="button">
                <span>❓</span>
                <span>FAQ</span>
            </button>
            <button class="mobile-menu-item" id="mobileWalletBtn" onclick="handleMobileWalletClick()" type="button">
                <span>💼</span>
                <span>Підключити гаманець</span>
            </button>
        </div>
    </div>

    <div class="container">
        <div class="top-left-menu">
            <button class="ecosystem-button" onclick="openModal('ecosystemModal')">
                <span>🌐</span>
                <span>Про Екосистему</span>
            </button>
            <button class="ecosystem-button" onclick="openModal('ticsModal')">
                <span>💎</span>
                <span>Монета TICS</span>
            </button>
            <button class="ecosystem-button" onclick="openModal('calcModal')">
                <span>🧮</span>
                <span>Калькулятор</span>
            </button>
            <button class="ecosystem-button" onclick="openModal('delegatorModal')">
                <span>🤝</span>
                <span>Стати делегатором</span>
            </button>
            <button class="ecosystem-button" onclick="openModal('faqModal')">
                <span>❓</span>
                <span>FAQ</span>
            </button>
            <div style="position: relative;">
                <button class="header-wallet-button" id="headerWalletBtn" onclick="toggleHeaderWalletDropdown(event)">
                    <span>💼</span>
                    <span>Підключити гаманець</span>
                </button>
                <div class="wallet-dropdown" id="headerWalletDropdown">
                    <button class="wallet-option" onclick="connectHeaderWallet('keplr'); event.stopPropagation();">
                        <span>🔷</span>
                        <span>Keplr</span>
                    </button>
                    <button class="wallet-option" onclick="connectHeaderWallet('cosmostation'); event.stopPropagation();">
                        <span>🔶</span>
                        <span>Cosmostation</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="top-contacts">
            <a href="https://t.me/+sRnz7RyoL4Q0MWEy" class="contact-link" target="_blank">
                <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/>
                </svg>
                <span>Telegram</span>
            </a>
            <a href="/cdn-cgi/l/email-protection#6e180f02070a0f1a011c401f1b0c0b00010a0b2e09030f0702400d0103" class="contact-link">
                <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                </svg>
                <span>Email</span>
            </a>
        </div>

        <header>
            <div class="qubetics-brand">
                <img src="qubetics.png" alt="Qubetics">
                <span>QUBETICS BLOCKCHAIN</span>
            </div>

            <div class="brand-container">
                <img src="qubenode-logo.png" alt="QubeNode">
                <h1 class="validator-name">QubeNode</h1>
            </div>
            <p class="subtitle">Стабільний та надійний валідатор мережі Qubetics</p>
            <div class="status-badge-extended">
                <div class="status-badge-header">
                    <span class="status-dot"></span>
                    <span>Активний Валідатор</span>
                </div>
                <div class="block-info" style="text-align: center; margin-bottom: 4px; width: 100%;">
                    Блок #<span id="currentBlock">—</span> • Avg Block Time: <span id="avgBlockTime">—</span>
                </div>
                <div class="blocks-chain-inline" id="blocksChainInline" style="width: 100%; display: flex; overflow: hidden; position: relative;">
                    <!-- Blocks will be added here -->
                </div>
            </div>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Загальна Сума</div>
                <div class="stat-value" id="delegatedAmountContainer">--</div>
                <div class="stat-subvalue">Делеговано $TICS</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Делегатори</div>
                <div class="stat-value"><span id="delegatorsCount">--</span></div>
                <div class="stat-subvalue">Активні учасники</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Uptime</div>
                <div class="stat-value"><span id="uptimePercent">--</span></div>
                <div class="stat-subvalue">Останні 100K блоків</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Rank</div>
                <div class="stat-value"><span id="validatorRank">--</span></div>
                <div class="stat-subvalue">За голосувальною силою</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">APY</div>
                <div class="stat-value">30%</div>
                <div class="stat-subvalue">Річна винагорода</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Ставка Комісії</div>
                <div class="stat-value"><span id="commissionRate">--</span></div>
                <div class="stat-subvalue">Найнижча можлива комісія<br>Від 30% APY → 28.5% ваш дохід</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Ціна $TICS</div>
                <div class="stat-value"><span id="ticsPrice">--</span></div>
                <div class="stat-subvalue">Поточна ринкова ціна монети $TICS</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Зміна за 24Г</div>
                <div class="stat-value" style="color: #22c55e;"><span id="ticsChange">--</span></div>
                <div class="stat-subvalue">Зміна ціни за останні 24 години</div>
            </div>
        </div>

        <div class="info-section">
            <h2>Чому обрати QubeNode?</h2>
            <div class="info-row">
                <div class="info-label">🛡️ Надійність</div>
                <div class="info-value">Високий uptime — ми забезпечуємо стабільну роботу ноди 24/7 з професійним моніторингом</div>
            </div>
            <div class="info-row">
                <div class="info-label">💎 Мінімальна комісія мережі</div>
                <div class="info-value">Фіксована комісія 5% — більше винагороди залишається у вас</div>
            </div>
            <div class="info-row">
                <div class="info-label">⚡ Продуктивність</div>
                <div class="info-value">Потужне обладнання та оптимізована конфігурація ноди для максимальної ефективності</div>
            </div>
            <div class="info-row">
                <div class="info-label">🤝 Підтримка</div>
                <div class="info-value">Швидка підтримка та відкрита комунікація з делегаторами</div>
            </div>
        </div>

        <footer>
            <p><strong>QubeNode</strong> - Професійний валідатор Qubetics Network</p>
            <p>© 2025 QubeNode. Всі права захищено.</p>
        </footer>
    </div>

    <!-- Ecosystem Modal -->
    <div id="ecosystemModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Про Екосистему Qubetics</h2>
                <button class="close-button" data-close="ecosystemModal" onclick="closeModal('ecosystemModal')">&times;</button>
            </div>
            <div class="modal-body">
                <h3>Що таке Qubetics?</h3>
                <p>Qubetics — це перша у світі Layer-1 Web3-агрегована блокчейн-екосистема, створена для об'єднання Bitcoin, Ethereum, Solana та інших провідних мереж у єдину платформу. Побудована на Cosmos SDK з повною сумісністю EVM, мережа Qubetics вже працює і активно розвивається, маючи на меті вирішити проблему фрагментації блокчейну через забезпечення безшовної міжланцюгової взаємодії.</p>
                
                <h3>Чому це важливо</h3>
                <p>Традиційні блокчейни працюють ізольовано, створюючи бар'єри для обміну даними та обмежуючи масштабованість. Qubetics вирішує це через безшовне з'єднання мереж — дозволяючи активам, даним та додаткам вільно переміщуватися через ланцюги з єдиної платформи без використання традиційних мостів.</p>
                
                <h3>Майбутні Технології та Інновації</h3>
                
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; margin-top: 30px;">
                    <div>
                        <div style="color: #00FFF0; font-size: 1.1em; font-weight: 700; margin-bottom: 10px;">⚡ Протокол Абстракції Ланцюгів (CAP)</div>
                        <p style="color: #94a3b8; font-size: 0.95em; line-height: 1.7; margin: 0;">CAP - це революційний протокол Qubetics для міжланцюгових переказів на основі намірів (intent-based). Без мостів, обмінів чи кастодіальних ризиків - активи залишаються в смарт-контрактних сховищах до підтвердження розрахунку. Децентралізована мережа Solver забезпечує безшовну ліквідність через кілька ланцюгів.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 1.1em; font-weight: 700; margin-bottom: 10px;">💳 Гаманець Qubetics</div>
                        <p style="color: #94a3b8; font-size: 0.95em; line-height: 1.7; margin: 0;">Більше ніж просто крипто-гаманець — це ваш шлях до повсякденних цифрових фінансів. Гаманець Qubetics поєднує некастодіальну безпеку з реальною корисністю через інтегровані дебетові картки, віртуальні картки та підтримку Apple Pay і Google Pay.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 1.1em; font-weight: 700; margin-bottom: 10px;">🔒 Децентралізована VPN (dVPN)</div>
                        <p style="color: #94a3b8; font-size: 0.95em; line-height: 1.7; margin: 0;">Peer-to-peer VPN мережа, де користувачі діляться пропускною здатністю та заробляють монети $TICS за надання підключення. На відміну від централізованих VPN, Qubetics dVPN працює в розподіленій мережі без єдиної точки контролю.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 1.1em; font-weight: 700; margin-bottom: 10px;">💎 Маркетплейс Токенізованих Активів</div>
                        <p style="color: #94a3b8; font-size: 0.95em; line-height: 1.7; margin: 0;">Перетворюйте реальні активи в торгові цифрові токени на блокчейні. Володійте частковими частками нерухомості, торгуйте правами інтелектуальної власності або інвестуйте в токенізовані цінні папери з повною прозорістю.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 1.1em; font-weight: 700; margin-bottom: 10px;">🛠️ QubeQode IDE</div>
                        <p style="color: #94a3b8; font-size: 0.95em; line-height: 1.7; margin: 0;">Платформа розробки на базі AI, яка робить створення блокчейн-додатків доступним для всіх. З компонентами drag-and-drop та допомогою AI, підприємці можуть створювати складні dApps без написання коду.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 1.1em; font-weight: 700; margin-bottom: 10px;">💵 Стейблкоїн QUSD</div>
                        <p style="color: #94a3b8; font-size: 0.95em; line-height: 1.7; margin: 0;">Повністю забезпечений стейблкоїн, прив'язаний до долара США, забезпечений резервами USDT та USDC. QUSD забезпечує миттєві, недорогі міжнародні платежі та служить стабільним засобом обміну в екосистемі Qubetics.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 1.1em; font-weight: 700; margin-bottom: 10px;">⚛️ Квантово-Стійка Безпека</div>
                        <p style="color: #94a3b8; font-size: 0.95em; line-height: 1.7; margin: 0;">Qubetics проактивно впроваджує пост-квантові криптографічні алгоритми для захисту активів користувачів від майбутніх квантових атак. Ця перспективна модель безпеки використовує криптографію на основі решіток та квантово-стійкі схеми підписів.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 1.1em; font-weight: 700; margin-bottom: 10px;">💰 Міжнародні Розрахунки</div>
                        <p style="color: #94a3b8; font-size: 0.95em; line-height: 1.7; margin: 0;">Qubetics дає змогу банкам та фінансовим установам здійснювати майже миттєві міжнародні платежі, використовуючи монети $TICS. Усуваючи посередників, мережа значно зменшує витрати та час транзакцій з днів до секунд, забезпечуючи повну прозорість та регуляторну відповідність.</p>
                    </div>
                </div>
                
                <h3 style="margin-top: 50px;">Чому Qubetics - це Майбутнє Блокчейну</h3>
                <p style="font-size: 0.95em; line-height: 1.8; color: #cbd5e1;">
                    Qubetics представляє майбутнє блокчейну — першу у світі Layer-1 Web3-агреговану екосистему, яка об'єднає провідні мережі, включаючи Bitcoin, Ethereum, Solana та інші, в одну безшовну платформу. Поки більшість блокчейнів працюють ізольовано, Qubetics вирішить проблему фрагментації завдяки революційному Протоколу Абстракції Ланцюгів (CAP), забезпечуючи справжню міжланцюгову взаємодію без численних гаманців і складних мостів.
                </p>
                <p style="font-size: 0.95em; line-height: 1.8; color: #cbd5e1; margin-top: 15px;">
                    Qubetics Wallet відкриє доступ до всього світу Web3 через один гаманець. Міжнародні платежі більше не повинні тривати днями та коштувати дорого — на Qubetics вони стануть швидкими та зручними.
                </p>
                <p style="font-size: 0.95em; line-height: 1.8; color: #cbd5e1; margin-top: 15px;">
                    Децентралізована VPN гарантуватиме приватність і свободу доступу до інтернету, інструменти розробки з підтримкою AI демократизують створення dApp, а квантово-стійка безпека захистить майбутнє користувачів.
                </p>
                <p style="font-size: 0.95em; line-height: 1.8; color: #cbd5e1; margin-top: 15px;">
                    Qubetics — це не просто ще один блокчейн. Це міст між традиційними фінансами та Web3-інноваціями, підсилений консенсусом Delegated Proof of Stake та сильною екосистемою валідаторів і делегаторів. Мережа не просто обіцяє майбутнє — вона активно будує його вже сьогодні, роблячи блокчейн доступним і корисним для мільйонів людей у всьому світі.
                </p>
            </div>
            
            <div class="modal-footer" style="padding: 40px 60px; background: rgba(0, 212, 255, 0.05); border-top: 1px solid rgba(0, 212, 255, 0.2); display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                <a href="https://www.qubetics.com" class="modal-link" target="_blank" style="display: inline-flex; align-items: center; gap: 12px; padding: 18px 40px; background: rgba(0, 212, 255, 0.1); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 50px; color: #00D4FF; text-decoration: none; font-weight: 600; font-size: 1.1em; transition: all 0.3s;">
                    <span>🌐</span>
                    <span>Офіційний Сайт</span>
                </a>
                <a href="https://www.qubetics.com/documents/whitepaper.pdf?_gl=1*1al7y33*_gcl_au*MTU0NDc2NTgyOC4xNzU5NjE4NzA3" class="modal-link" target="_blank" style="display: inline-flex; align-items: center; gap: 12px; padding: 18px 40px; background: rgba(0, 212, 255, 0.1); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 50px; color: #00D4FF; text-decoration: none; font-weight: 600; font-size: 1.1em; transition: all 0.3s;">
                    <span>📄</span>
                    <span>Читати Whitepaper</span>
                </a>
            </div>
        </div>
    </div>

    <!-- TICS Modal -->
    <div id="ticsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>$TICS Coin</h2>
                <button class="close-button" data-close="ticsModal" onclick="closeModal('ticsModal')">&times;</button>
            </div>
            <div class="modal-body">
                <h3>Що таке $TICS?</h3>
                <p>$TICS - це нативна монета блокчейну Qubetics (Layer 1), яка є серцем всієї екосистеми. Вона живить мережу, виконує критичні функції та створює цінність для всіх учасників платформи.</p>
                
                <h3>Ключові Функції $TICS</h3>
                
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; margin-top: 30px;">
                    <div>
                        <div style="color: #00FFF0; font-size: 0.95em; font-weight: 700; margin-bottom: 10px;">⛽ Газ для Транзакцій</div>
                        <p style="color: #94a3b8; font-size: 0.9em; line-height: 1.6; margin: 0;">$TICS використовується для оплати всіх операцій у мережі — від простих переказів до складних смарт-контрактів та міжланцюгових операцій.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 0.95em; font-weight: 700; margin-bottom: 10px;">🔒 Стейкінг та Безпека Мережі</div>
                        <p style="color: #94a3b8; font-size: 0.9em; line-height: 1.6; margin: 0;">Делегування $TICS валідаторам забезпечує безпеку блокчейну через консенсус Delegated Proof of Stake (DPoS). Валідатори та делегатори отримують винагороди за підтримку мережі.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 0.95em; font-weight: 700; margin-bottom: 10px;">🌉 Протокол Абстракції Ланцюгів (CAP)</div>
                        <p style="color: #94a3b8; font-size: 0.9em; line-height: 1.6; margin: 0;">$TICS буде використовуватися для міжланцюгових операцій через власний протокол Qubetics — CAP. Це революційна технологія переказів на основі намірів, яка усуне необхідність мостів, обмінів та кастодіальних ризиків, забезпечуючи безшовну взаємодію між Bitcoin, Ethereum, Solana та іншими блокчейнами.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 0.95em; font-weight: 700; margin-bottom: 10px;">🔐 Децентралізована VPN (dVPN)</div>
                        <p style="color: #94a3b8; font-size: 0.9em; line-height: 1.6; margin: 0;">$TICS буде служити валютою для оплати в децентралізованій VPN мережі. Оператори вузлів будуть заробляти $TICS за надання пропускної здатності, а користувачі будуть платити за приватний та безпечний доступ до інтернету.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 0.95em; font-weight: 700; margin-bottom: 10px;">💎 Маркетплейс Токенізованих Активів</div>
                        <p style="color: #94a3b8; font-size: 0.9em; line-height: 1.6; margin: 0;">$TICS буде основним засобом обміну на маркетплейсі токенізованих активів, де користувачі зможуть купувати та продавати часткові частки нерухомості, цінних паперів та інтелектуальної власності.</p>
                    </div>
                    
                    <div>
                        <div style="color: #00FFF0; font-size: 0.95em; font-weight: 700; margin-bottom: 10px;">⚡ DeFi та dApps</div>
                        <p style="color: #94a3b8; font-size: 0.9em; line-height: 1.6; margin: 0;">Монета буде використовуватися у всіх децентралізованих додатках, побудованих на Qubetics, включаючи DeFi протоколи, NFT платформи та інші інноваційні рішення.</p>
                    </div>
                </div>
                
                <h3 style="text-align: center; margin-top: 15px; margin-bottom: 12px;">Доступно на Біржах</h3>
                
                <div class="exchanges-container" style="display: flex; justify-content: space-around; align-items: center; gap: 15px; max-width: 100%; margin: 0 auto 15px auto; padding: 0; height: 140px;">
                    <a href="https://www.mexc.com/uk-UA/exchange/TICS_USDT?_from=search_spot_trade" target="_blank" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none; transition: all 0.3s; height: 140px;">
                        <img src="Mexc.png" alt="MEXC Exchange" style="width: auto; height: 140px; max-width: 100%; object-fit: contain; object-position: center; transition: all 0.3s; cursor: pointer; filter: brightness(1); display: block; vertical-align: middle;">
                    </a>
                    <a href="https://www.lbank.com/uk/trade/tics_usdt" target="_blank" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none; transition: all 0.3s; height: 140px;">
                        <img src="LBank.png" alt="LBank Exchange" style="width: auto; height: 140px; max-width: 100%; object-fit: contain; object-position: center; transition: all 0.3s; cursor: pointer; filter: brightness(1); display: block; vertical-align: middle;">
                    </a>
                    <a href="https://www.coinstore.com/spot/TICSUSDT?ts=1760907955300" target="_blank" style="flex: 1; display: flex; align-items: center; justify-content: center; text-decoration: none; transition: all 0.3s; height: 140px;">
                        <img src="Coinstore.png" alt="Coinstore Exchange" style="width: auto; height: 140px; max-width: 100%; object-fit: contain; object-position: center; transition: all 0.3s; cursor: pointer; filter: brightness(1); display: block; vertical-align: middle;">
                    </a>
                </div>
                
                <h3 style="text-align: center; margin-top: 0; margin-bottom: 10px;">Ціна $TICS Chart</h3>
                
                <div style="margin: 0 auto; max-width: 100%; height: 500px; background: rgba(0, 212, 255, 0.03); border: 1px solid rgba(0, 212, 255, 0.2); border-radius: 12px; overflow: hidden;">
                    <iframe src="https://www.tradingview.com/widgetembed/?frameElementId=tradingview_chart&symbol=MEXC%3ATICSUSDT&interval=240&hidesidetoolbar=0&symboledit=1&saveimage=1&toolbarbg=rgba(0%2C0%2C0%2C0)&studies=%5B%5D&theme=dark&style=1&timezone=Etc%2FUTC&withdateranges=1&studies_overrides=%7B%7D&overrides=%7B%7D&enabled_features=%5B%5D&disabled_features=%5B%5D&locale=en&utm_source=www.tradingview.com&utm_medium=widget&utm_campaign=chart&utm_term=MEXC%3ATICSUSDT" style="width: 100%; height: 100%; border: none;"></iframe>
                </div>
            </div>
            
            <div class="modal-footer" style="padding: 40px 60px; background: rgba(0, 212, 255, 0.05); border-top: 1px solid rgba(0, 212, 255, 0.2); display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                <a href="https://www.qubetics.com" class="modal-link" target="_blank" style="display: inline-flex; align-items: center; gap: 12px; padding: 18px 40px; background: rgba(0, 212, 255, 0.1); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 50px; color: #00D4FF; text-decoration: none; font-weight: 600; font-size: 1.1em; transition: all 0.3s;">
                    <span>🌐</span>
                    <span>Офіційний Сайт</span>
                </a>
                <a href="https://www.qubetics.com/tokenomics" class="modal-link" target="_blank" style="display: inline-flex; align-items: center; gap: 12px; padding: 18px 40px; background: rgba(0, 212, 255, 0.1); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 50px; color: #00D4FF; text-decoration: none; font-weight: 600; font-size: 1.1em; transition: all 0.3s;">
                    <span>📊</span>
                    <span>Токеноміка</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Calculator Modal - Advanced v2.0 -->
    <div id="calcModal" class="modal">
        <div class="modal-content" style="max-width: 1000px; margin: 0 auto;">
            <div class="modal-header">
                <h2>💰 Калькулятор Стейкінгу</h2>
                <button class="close-button" data-close="calcModal" onclick="closeModal('calcModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div style="background: rgba(0, 212, 255, 0.03); border: 1px solid rgba(0, 212, 255, 0.2); border-radius: 20px; padding: 40px; max-width: 900px; margin: 0 auto;">
                    
                    <!-- Preset Buttons -->
                    <div style="margin-bottom: 30px;">
                        <label style="display: block; color: #00D4FF; font-weight: 600; margin-bottom: 12px; text-align: center;">Швидкий вибір суми:</label>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                            <button onclick="setAmount(100)" style="padding: 10px 20px; background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 10px; color: #00FFF0; cursor: pointer; transition: all 0.3s;">100 TICS</button>
                            <button onclick="setAmount(1000)" style="padding: 10px 20px; background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 10px; color: #00FFF0; cursor: pointer; transition: all 0.3s;">1,000 TICS</button>
                            <button onclick="setAmount(5000)" style="padding: 10px 20px; background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 10px; color: #00FFF0; cursor: pointer; transition: all 0.3s;">5,000 TICS</button>
                            <button onclick="setAmount(10000)" style="padding: 10px 20px; background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 10px; color: #00FFF0; cursor: pointer; transition: all 0.3s;">10,000 TICS</button>
                            <button onclick="setAmount(50000)" style="padding: 10px 20px; background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 10px; color: #00FFF0; cursor: pointer; transition: all 0.3s;">50,000 TICS</button>
                        </div>
                    </div>

                    <!-- Input Fields -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                        <div>
                            <label style="display: block; color: #00D4FF; font-weight: 600; margin-bottom: 8px;">Кількість $TICS</label>
                            <input type="number" id="amount" class="calc-input" placeholder="Введіть кількість монет" oninput="calculateAuto()" style="width: 100%;">
                        </div>
                        
                        <div>
                            <label style="display: block; color: #00D4FF; font-weight: 600; margin-bottom: 8px;">Період</label>
                            <select id="period" class="calc-input" onchange="usePeriod()" style="width: 100%; padding: 15px; background: rgba(0, 212, 255, 0.05); border: 1px solid rgba(0, 212, 255, 0.2); border-radius: 12px; color: #fff; font-size: 1em;">
                                <option value="">-- Вибрати --</option>
                                <option value="1">1 місяць</option>
                                <option value="3">3 місяці</option>
                                <option value="6">6 місяців</option>
                                <option value="12" selected>1 рік</option>
                                <option value="24">2 роки</option>
                                <option value="36">3 роки</option>
                                <option value="48">4 роки</option>
                                <option value="60">5 років</option>
                            </select>
                        </div>
                        
                        <div>
                            <label style="display: block; color: #00D4FF; font-weight: 600; margin-bottom: 8px;">Або днів</label>
                            <input type="number" id="customDays" class="calc-input" placeholder="Введіть кількість днів" oninput="useCustomDays()" style="width: 100%;">
                        </div>
                        
                        <div>
                            <label style="display: block; color: #00D4FF; font-weight: 600; margin-bottom: 8px;">Ціна $TICS (USD)</label>
                            <input type="number" id="customPrice" class="calc-input" placeholder="Авто з MEXC" step="0.0001" oninput="useCustomPrice()" style="width: 100%;">
                            <div style="color: #64748b; font-size: 0.8em; margin-top: 4px;">Поточна: $<span id="currentPriceDisplay">0.0380</span></div>
                        </div>
                        
                        <div>
                            <label style="display: block; color: #00D4FF; font-weight: 600; margin-bottom: 8px;">Реінвестування</label>
                            <select id="compoundFrequency" class="calc-input" onchange="calculateAuto()" style="width: 100%; padding: 15px; background: rgba(0, 212, 255, 0.05); border: 1px solid rgba(0, 212, 255, 0.2); border-radius: 12px; color: #fff; font-size: 1em;">
                                <option value="none">Без реінвестування</option>
                                <option value="daily">Щоденне (вручну)</option>
                                <option value="weekly">Щотижневе (вручну)</option>
                                <option value="monthly">Щомісячне (вручну)</option>
                                <option value="quarterly">Щоквартальне (вручну)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div id="calcResults" style="display: none;">
                        <!-- Summary Cards -->
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 30px;">
                            <!-- Daily -->
                            <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.12), rgba(74, 222, 128, 0.08)); border: 1px solid rgba(34, 197, 94, 0.35); border-radius: 15px; padding: 20px; text-align: center;">
                                <div style="color: #94a3b8; font-size: 0.9em; margin-bottom: 8px;">Щоденний дохід</div>
                                <div style="color: #22c55e; font-size: 1.5em; font-weight: 700;" id="dailyResult">--</div>
                                <div style="color: #86efac; font-size: 0.85em; margin-top: 5px;" id="dailyUSD">--</div>
                            </div>
                            
                            <!-- Weekly -->
                            <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.12), rgba(74, 222, 128, 0.08)); border: 1px solid rgba(34, 197, 94, 0.35); border-radius: 15px; padding: 20px; text-align: center;">
                                <div style="color: #94a3b8; font-size: 0.9em; margin-bottom: 8px;">Тижневий дохід</div>
                                <div style="color: #22c55e; font-size: 1.5em; font-weight: 700;" id="weeklyResult">--</div>
                                <div style="color: #86efac; font-size: 0.85em; margin-top: 5px;" id="weeklyUSD">--</div>
                            </div>
                            
                            <!-- Monthly -->
                            <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.12), rgba(74, 222, 128, 0.08)); border: 1px solid rgba(34, 197, 94, 0.35); border-radius: 15px; padding: 20px; text-align: center;">
                                <div style="color: #94a3b8; font-size: 0.9em; margin-bottom: 8px;">Місячний дохід</div>
                                <div style="color: #22c55e; font-size: 1.5em; font-weight: 700;" id="monthlyResult">--</div>
                                <div style="color: #86efac; font-size: 0.85em; margin-top: 5px;" id="monthlyUSD">--</div>
                            </div>
                            
                            <!-- Total -->
                            <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(74, 222, 128, 0.1)); border: 2px solid rgba(34, 197, 94, 0.4); border-radius: 15px; padding: 20px; text-align: center;">
                                <div style="color: #94a3b8; font-size: 0.9em; margin-bottom: 8px;">Загальний дохід</div>
                                <div style="color: #22c55e; font-size: 1.6em; font-weight: 700;" id="totalResult">--</div>
                                <div style="color: #86efac; font-size: 0.85em; margin-top: 5px;" id="totalUSD">--</div>
                            </div>
                        </div>

                        <!-- Detailed Breakdown -->
                        <div style="background: rgba(34, 197, 94, 0.05); border: 1px solid rgba(34, 197, 94, 0.25); border-radius: 15px; padding: 25px; margin-bottom: 30px;">
                            <h4 style="color: #22c55e; margin-bottom: 20px;">📊 Детальний розрахунок</h4>
                            
                            <div style="display: grid; gap: 12px;">
                                <!-- Principal -->
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(34, 197, 94, 0.15);">
                                    <span style="color: #94a3b8;">Тіло депозиту (Principal):</span>
                                    <span style="color: #fff; font-weight: 600;" id="initialAmount">--</span>
                                </div>
                                
                                <!-- Period -->
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(34, 197, 94, 0.15);">
                                    <span style="color: #94a3b8;">Період стейкінгу:</span>
                                    <span style="color: #fff; font-weight: 600;" id="periodText">--</span>
                                </div>
                                
                                <!-- APY -->
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(34, 197, 94, 0.15);">
                                    <span style="color: #94a3b8;">APY (базова ставка):</span>
                                    <span style="color: #22c55e; font-weight: 600;">30%</span>
                                </div>
                                
                                <!-- Validator Commission % -->
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(34, 197, 94, 0.15);">
                                    <span style="color: #94a3b8;">Комісія валідатора (%):</span>
                                    <span style="color: #fbbf24; font-weight: 600;">5%</span>
                                </div>
                                
                                <!-- Your Effective APY -->
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(34, 197, 94, 0.15);">
                                    <span style="color: #94a3b8;">Ваш реальний APY:</span>
                                    <span style="color: #22c55e; font-weight: 600; font-size: 1.05em;">28.5%</span>
                                </div>
                                
                                <!-- Compound Type -->
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(34, 197, 94, 0.15);">
                                    <span style="color: #94a3b8;">Реінвестування:</span>
                                    <span style="color: #fff; font-weight: 600;" id="compoundText">--</span>
                                </div>
                                
                                <!-- Total Rewards -->
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(34, 197, 94, 0.15);">
                                    <span style="color: #94a3b8;">Загальна винагорода:</span>
                                    <span style="color: #22c55e; font-weight: 700; font-size: 1.05em;" id="totalRewardAmount">--</span>
                                </div>
                                
                                <!-- Validator Commission Amount -->
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(34, 197, 94, 0.15);">
                                    <span style="color: #94a3b8;">Комісія валідатора (сума):</span>
                                    <span style="color: #fbbf24; font-weight: 600;" id="validatorCommissionAmount">--</span>
                                </div>
                                
                                <!-- Your Net Reward -->
                                <div style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 2px solid rgba(34, 197, 94, 0.3);">
                                    <span style="color: #94a3b8;">Ваша винагорода (чиста):</span>
                                    <span style="color: #22c55e; font-weight: 700; font-size: 1.05em;" id="netRewardAmount">--</span>
                                </div>
                                
                                <!-- Final Amount -->
                                <div style="display: flex; justify-content: space-between; padding: 15px 0 5px 0; margin-top: 10px;">
                                    <span style="color: #22c55e; font-size: 1.15em; font-weight: 700;">Кінцева сума:</span>
                                    <span style="color: #22c55e; font-size: 1.15em; font-weight: 700;" id="finalAmount">--</span>
                                </div>
                            </div>
                        </div>

                        <!-- Comparison: With vs Without Compound -->
                        <div id="compoundComparison" style="background: rgba(34, 197, 94, 0.05); border: 1px solid rgba(34, 197, 94, 0.2); border-radius: 15px; padding: 25px; display: none;">
                            <h4 style="color: #22c55e; margin-bottom: 20px;">💡 Порівняння: без реінвестування vs з реінвестуванням</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                <div>
                                    <div style="color: #94a3b8; margin-bottom: 10px;">Без реінвестування:</div>
                                    <div style="color: #fff; font-size: 1.3em; font-weight: 600;" id="withoutCompound">--</div>
                                </div>
                                <div>
                                    <div style="color: #94a3b8; margin-bottom: 10px;">З реінвестуванням:</div>
                                    <div style="color: #22c55e; font-size: 1.3em; font-weight: 700;" id="withCompound">--</div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 15px; padding: 15px; background: rgba(34, 197, 94, 0.1); border-radius: 10px;">
                                <div style="color: #22c55e; font-weight: 600;">Додатковий прибуток з реінвестуванням:</div>
                                <div style="color: #fff; font-size: 1.2em; margin-top: 5px;" id="compoundBenefit">--</div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Delegator Modal -->
    <div id="delegatorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Стати делегатором QubeNode</h2>
                <button class="close-button" data-close="delegatorModal" onclick="closeModal('delegatorModal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- DELEGATOR DASHBOARD - Shows when wallet is connected -->

                <!-- Способи делегування -->
                <div style="background: rgba(0, 212, 255, 0.03); border: 1px solid rgba(0, 212, 255, 0.2); border-radius: 20px; padding: 40px; margin: 30px 0;">
                    
                    <!-- Спосіб 1: Через гаманці Keplr/Cosmostation -->
                    <div style="margin-bottom: 40px;">
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                            <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.4em; font-weight: 800; color: #000;">1</div>
                            <h3 style="color: #00FFF0; font-size: 1.5em; margin: 0;">Делегування через мобільний гаманець</h3>
                        </div>
                        
                        <p style="color: #cbd5e1; margin-bottom: 20px; line-height: 1.8;">
                            Ви можете зробити делегування у гаманці 
                            <span style="color: #00D4FF; font-weight: 600; cursor: pointer;" onclick="openModal('keplrGuideModal')">Keplr (<u>інструкція</u>)</span> 
                            або 
                            <span style="color: #00D4FF; font-weight: 600;">Cosmostation</span>.
                        </p>
                        
                        <div style="background: rgba(250, 204, 21, 0.1); border-left: 4px solid #facc15; padding: 15px 20px; border-radius: 8px; margin-top: 15px;">
                            <p style="color: #fde047; margin: 0; font-size: 0.95em;">
                                <span style="font-weight: 700;">💡 Рекомендація:</span> Радимо використовувати гаманець Keplr для мобільного делегування.
                            </p>
                        </div>
                    </div>

                    <!-- Спосіб 2: Через наш сайт -->
                    <div>
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                            <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.4em; font-weight: 800; color: #000;">2</div>
                            <h3 style="color: #00FFF0; font-size: 1.5em; margin: 0;">Делегування через QubeNode.space</h3>
                        </div>
                        
                        <p style="color: #cbd5e1; margin-bottom: 20px; line-height: 1.8;">
                            Найпростіший спосіб — підключити гаманець прямо на цій сторінці для миттєвого делегування.
                        </p>
                        
                        <div style="background: rgba(0, 212, 255, 0.05); border-left: 4px solid #00D4FF; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
                            <p style="color: #00FFF0; font-weight: 600; margin-bottom: 12px; font-size: 1.05em;">
                                💎 Після підключення гаманця ви зможете:
                            </p>
                            <ul style="color: #cbd5e1; margin: 0; padding-left: 20px; line-height: 2;">
                                <li><strong style="color: #00D4FF;">Переглянути дашборд делегатора</strong> — баланс, делегації, винагороди</li>
                                <li><strong style="color: #00D4FF;">Делегувати токени</strong> валідатору QubeNode</li>
                                <li><strong style="color: #00D4FF;">Ределегувати</strong> токени між валідаторами</li>
                                <li><strong style="color: #00D4FF;">Зібрати винагороди</strong> в будь-який момент</li>
                                <li><strong style="color: #00D4FF;">Зробити Undelegate</strong> (розблокування за 14 днів)</li>
                                <li><strong style="color: #00D4FF;">Скасувати активний Unbond</strong> під час періоду розблокування</li>
                            </ul>
                        </div>

                        <!-- Wallet Connection Section -->
                        <div id="walletSection">
                            <p style="color: #cbd5e1; margin-bottom: 15px; font-size: 0.95em; font-weight: 600;">Підключіть гаманець для делегування $TICS:</p>
                            
                            <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 15px;">
                                <button id="connectKeplrBtn" onclick="connectHeaderWallet('keplr')" style="flex: 1; min-width: 180px; padding: 14px 24px; background: rgba(0, 212, 255, 0.15); border: 2px solid rgba(0, 212, 255, 0.4); border-radius: 10px; color: #00FFF0; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;">
                                    <span style="font-size: 1.2em;">🔷</span>
                                    <span>Keplr Wallet</span>
                                </button>
                                
                                <button id="connectCosmostationBtn" onclick="connectHeaderWallet('cosmostation')" style="flex: 1; min-width: 180px; padding: 14px 24px; background: rgba(0, 212, 255, 0.15); border: 2px solid rgba(0, 212, 255, 0.4); border-radius: 10px; color: #00FFF0; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;">
                                    <span style="font-size: 1.2em;">🔶</span>
                                    <span>Cosmostation</span>
                                </button>
                            </div>
                            
                            <div id="walletStatus" style="display: none; padding: 20px; background: rgba(0, 212, 255, 0.1); border-radius: 12px; margin-top: 20px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <div>
                                        <div style="color: #00FFF0; font-weight: 600; margin-bottom: 5px;">Підключено: <span id="connectedWallet"></span></div>
                                        <div style="color: #94a3b8; font-size: 0.9em; word-break: break-all;"><span id="connectedAddress"></span></div>
                                    </div>
                                    <button onclick="disconnectWallet()" style="padding: 10px 20px; background: rgba(255, 0, 0, 0.2); border: 1px solid rgba(255, 0, 0, 0.4); border-radius: 8px; color: #ff6b6b; cursor: pointer; font-weight: 600;">Відключити</button>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                                    <div style="padding: 15px; background: rgba(0, 0, 0, 0.3); border-radius: 10px;">
                                        <div style="color: #94a3b8; font-size: 0.9em; margin-bottom: 5px;">Баланс</div>
                                        <div style="color: #00FFF0; font-size: 1.3em; font-weight: 700;"><span id="walletBalance">0</span> TICS</div>
                                    </div>
                                    <div style="padding: 15px; background: rgba(0, 0, 0, 0.3); border-radius: 10px;">
                                        <div style="color: #94a3b8; font-size: 0.9em; margin-bottom: 5px;">Делеговано</div>
                                        <div style="color: #00FFF0; font-size: 1.3em; font-weight: 700;"><span id="walletDelegated">0</span> TICS</div>
                                    </div>
                                    <div style="padding: 15px; background: rgba(0, 0, 0, 0.3); border-radius: 10px;">
                                        <div style="color: #94a3b8; font-size: 0.9em; margin-bottom: 5px;">Винагороди</div>
                                        <div style="color: #22c55e; font-size: 1.3em; font-weight: 700;"><span id="walletRewards">0</span> TICS</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Staking Actions Section -->
                        <div id="stakingActions" style="display: none; margin-top: 30px;">
                            <div style="background: rgba(0, 0, 0, 0.3); border-radius: 15px; padding: 25px;">
                                <h4 style="color: #00FFF0; font-size: 1.2em; margin-bottom: 20px;">Операції зі стейкінгом</h4>
                                
                                <div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid rgba(0, 212, 255, 0.2); padding-bottom: 10px;">
                                    <button onclick="showStakingTab('delegate')" id="tabDelegate" class="staking-tab active" style="padding: 12px 24px; background: rgba(0, 212, 255, 0.2); border: none; border-radius: 8px; color: #00FFF0; font-weight: 600; cursor: pointer; transition: all 0.3s;">Делегувати</button>
                                    <button onclick="showStakingTab('undelegate')" id="tabUndelegate" class="staking-tab" style="padding: 12px 24px; background: transparent; border: none; border-radius: 8px; color: #94a3b8; font-weight: 600; cursor: pointer; transition: all 0.3s;">Розділегувати</button>
                                    <button onclick="showStakingTab('claim')" id="tabClaim" class="staking-tab" style="padding: 12px 24px; background: transparent; border: none; border-radius: 8px; color: #94a3b8; font-weight: 600; cursor: pointer; transition: all 0.3s;">Забрати винагороду</button>
                                </div>
                                
                                <!-- Delegate Tab -->
                                <div id="delegateTab" class="staking-tab-content">
                                    <p style="color: #cbd5e1; margin-bottom: 15px;">Мінімальна сума делегування: <strong style="color: #00FFF0;">0.1 TICS</strong></p>
                                    <div style="margin-bottom: 20px;">
                                        <label style="color: #94a3b8; font-size: 0.95em; margin-bottom: 8px; display: block;">Сума TICS:</label>
                                        <input type="number" id="delegateAmount" placeholder="0.1" step="0.1" min="0.1" style="width: 100%; padding: 15px; background: rgba(0, 0, 0, 0.5); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 10px; color: #fff; font-size: 1.1em;">
                                    </div>
                                    <button onclick="executeDelegate()" style="width: 100%; padding: 18px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border: none; border-radius: 12px; color: #000; font-size: 1.2em; font-weight: 700; cursor: pointer; transition: all 0.3s;">
                                        💎 Делегувати на QubeNode
                                    </button>
                                </div>
                                
                                <!-- Undelegate Tab -->
                                <div id="undelegateTab" class="staking-tab-content" style="display: none;">
                                    <p style="color: #cbd5e1; margin-bottom: 15px;">Період розделегування: <strong style="color: #ff6b6b;">14 днів</strong></p>
                                    <div style="margin-bottom: 20px;">
                                        <label style="color: #94a3b8; font-size: 0.95em; margin-bottom: 8px; display: block;">Сума TICS:</label>
                                        <input type="number" id="undelegateAmount" placeholder="0.1" step="0.1" min="0.1" style="width: 100%; padding: 15px; background: rgba(0, 0, 0, 0.5); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 10px; color: #fff; font-size: 1.1em;">
                                    </div>
                                    <button onclick="executeUndelegate()" style="width: 100%; padding: 18px; background: rgba(255, 107, 107, 0.2); border: 2px solid rgba(255, 107, 107, 0.4); border-radius: 12px; color: #ff6b6b; font-size: 1.2em; font-weight: 700; cursor: pointer; transition: all 0.3s;">
                                        ⚠️ Розділегувати
                                    </button>
                                </div>
                                
                                <!-- Claim Tab -->
                                <div id="claimTab" class="staking-tab-content" style="display: none;">
                                    <p style="color: #cbd5e1; margin-bottom: 20px;">Заберіть вашу накопичену винагороду:</p>
                                    <div style="padding: 20px; background: rgba(34, 197, 94, 0.1); border: 2px solid rgba(34, 197, 94, 0.3); border-radius: 12px; margin-bottom: 20px; text-align: center;">
                                        <div style="color: #94a3b8; font-size: 0.9em; margin-bottom: 5px;">Доступна винагорода</div>
                                        <div style="color: #22c55e; font-size: 2em; font-weight: 700;"><span id="claimableRewards">0</span> TICS</div>
                                    </div>
                                    <button onclick="executeClaim()" style="width: 100%; padding: 18px; background: linear-gradient(135deg, #22c55e, #16a34a); border: none; border-radius: 12px; color: #000; font-size: 1.2em; font-weight: 700; cursor: pointer; transition: all 0.3s;">
                                        💰 Забрати винагороду
                                    </button>
                                </div>
                            </div>
                            
                            <div id="txStatus" style="display: none; margin-top: 20px; padding: 20px; border-radius: 12px;"></div>
                        </div>
                    </div>

                        <!-- DELEGATOR DASHBOARD - Shows when wallet is connected -->
                        <div id="delegatorDashboard" style="display: none; background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 255, 240, 0.05)); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 15px; padding: 20px; margin-top: 25px;">
                    <h3 style="color: #00FFF0; font-size: 1.5em; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <span>💎</span>
                        <span>Ваш стейкінг дашборд</span>
                    </h3>
                    
                    <!-- Dashboard Stats Grid -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <!-- Available Balance -->
                        <div style="background: linear-gradient(135deg, rgba(0, 212, 255, 0.15), rgba(0, 212, 255, 0.05)); border: 2px solid rgba(0, 212, 255, 0.4); border-radius: 12px; padding: 15px; text-align: center;">
                            <div style="color: #94a3b8; font-size: 0.8em; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;">💰 Баланс</div>
                            <div style="color: #00D4FF; font-size: 1.6em; font-weight: 700; margin-bottom: 3px;"><span id="dashBalance">0.00</span></div>
                            <div style="color: #64748b; font-size: 0.8em;">TICS</div>
                        </div>
                        
                        <!-- Delegated Amount -->
                        <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(34, 197, 94, 0.05)); border: 2px solid rgba(34, 197, 94, 0.4); border-radius: 12px; padding: 15px; text-align: center;">
                            <div style="color: #94a3b8; font-size: 0.8em; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;">🤝 Делеговано</div>
                            <div style="color: #22c55e; font-size: 1.6em; font-weight: 700; margin-bottom: 3px;"><span id="dashDelegated">0.00</span></div>
                            <div style="color: #86efac; font-size: 0.8em;">TICS</div>
                        </div>
                        
                        <!-- Rewards -->
                        <div style="background: linear-gradient(135deg, rgba(250, 204, 21, 0.15), rgba(250, 204, 21, 0.05)); border: 2px solid rgba(250, 204, 21, 0.4); border-radius: 12px; padding: 15px; text-align: center;">
                            <div style="color: #94a3b8; font-size: 0.8em; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;">✨ Винагороди</div>
                            <div style="color: #facc15; font-size: 1.6em; font-weight: 700; margin-bottom: 3px;"><span id="dashRewards">0.00</span></div>
                            <div style="color: #fde047; font-size: 0.8em;">TICS</div>
                        </div>
                        
                        <!-- Unbonding -->
                        <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(239, 68, 68, 0.05)); border: 2px solid rgba(239, 68, 68, 0.4); border-radius: 12px; padding: 15px; text-align: center;">
                            <div style="color: #94a3b8; font-size: 0.8em; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;">⏳ Unbonding</div>
                            <div style="color: #ef4444; font-size: 1.6em; font-weight: 700; margin-bottom: 3px;"><span id="dashUnbonding">0.00</span></div>
                            <div style="color: #fca5a5; font-size: 0.8em;">TICS (14 днів)</div>
                        </div>
                    </div>
                    
                    <!-- Rewards Forecast Section - MOVED UP -->
                    <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 18px; margin-bottom: 20px;">
                        <h4 style="color: #00FFF0; font-size: 1.1em; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <span>📈</span>
                            <span>Прогноз винагород</span>
                        </h4>
                        <div id="dashRewardsForecast">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 12px;">
                                <!-- Daily -->
                                <div style="background: linear-gradient(135deg, rgba(250, 204, 21, 0.1), rgba(250, 204, 21, 0.03)); border: 1px solid rgba(250, 204, 21, 0.3); border-radius: 10px; padding: 12px; text-align: center;">
                                    <div style="color: #fde047; font-size: 0.75em; margin-bottom: 6px; font-weight: 600;">На день</div>
                                    <div style="color: #facc15; font-size: 1.2em; font-weight: 700;"><span id="forecastDaily">0.00</span> TICS</div>
                                </div>
                                
                                <!-- Weekly -->
                                <div style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(168, 85, 247, 0.03)); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 10px; padding: 12px; text-align: center;">
                                    <div style="color: #c084fc; font-size: 0.75em; margin-bottom: 6px; font-weight: 600;">На тиждень</div>
                                    <div style="color: #a855f7; font-size: 1.2em; font-weight: 700;"><span id="forecastWeekly">0.00</span> TICS</div>
                                </div>
                                
                                <!-- Monthly -->
                                <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.03)); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 10px; padding: 12px; text-align: center;">
                                    <div style="color: #86efac; font-size: 0.75em; margin-bottom: 6px; font-weight: 600;">На місяць</div>
                                    <div style="color: #22c55e; font-size: 1.2em; font-weight: 700;"><span id="forecastMonthly">0.00</span> TICS</div>
                                </div>
                                
                                <!-- Yearly -->
                                <div style="background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(0, 212, 255, 0.03)); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 10px; padding: 12px; text-align: center;">
                                    <div style="color: #7dd3fc; font-size: 0.75em; margin-bottom: 6px; font-weight: 600;">На рік</div>
                                    <div style="color: #00D4FF; font-size: 1.2em; font-weight: 700;"><span id="forecastYearly">0.00</span> TICS</div>
                                </div>
                            </div>
                            <p style="color: #64748b; font-size: 0.75em; margin-top: 10px; text-align: center;">* APY ~30%, комісія валідатора вже врахована. Розрахунки наведені без урахування складного відсотка.</p>
                        </div>
                    </div>
                    
                                        <!-- Quick Actions Section -->
                    <div style="background: rgba(0, 212, 255, 0.08); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 12px; padding: 18px; margin-bottom: 15px;">
                        <h4 style="color: #00FFF0; font-size: 1.1em; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <span>💎</span>
                            <span>Швидкі дії</span>
                        </h4>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button onclick="quickStakeQubeNode()" style="flex: 1; min-width: 200px; padding: 14px 20px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border: none; border-radius: 10px; color: #000; font-size: 1em; font-weight: 700; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;">
                                <span style="font-size: 1.2em;">🚀</span>
                                <span>Делегувати на QubeNode</span>
                            </button>
                            <button onclick="quickClaimAllRewards()" style="flex: 1; min-width: 200px; padding: 14px 20px; background: rgba(250, 204, 21, 0.15); border: 2px solid rgba(250, 204, 21, 0.4); border-radius: 10px; color: #facc15; font-size: 1em; font-weight: 700; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;">
                                <span style="font-size: 1.2em;">💰</span>
                                <span>Забрати всі винагороди (<span id="dashClaimableRewards">0.00</span> TICS)</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- My Delegations Section - MOVED UP -->
                    <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 18px; margin-bottom: 15px;">
                        <h4 style="color: #00FFF0; font-size: 1.1em; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <span>📊</span>
                            <span>Мої делегування</span>
                        </h4>
                        <div id="dashDelegationsList">
                            <div style="padding: 15px; text-align: center; color: #94a3b8; font-size: 0.9em;">
                                Завантаження делегувань...
                            </div>
                        </div>
                    </div>
                    
                    <!-- Staking Actions Tabs - MOVED DOWN -->
                    <div style="background: rgba(0, 0, 0, 0.3); border-radius: 12px; padding: 18px; margin-bottom: 15px;">
                        <h4 style="color: #00FFF0; font-size: 1.1em; margin-bottom: 15px;">⚡ Швидкі дії</h4>
                        
                        <div style="display: flex; gap: 8px; margin-bottom: 15px; border-bottom: 2px solid rgba(0, 212, 255, 0.2); padding-bottom: 8px; flex-wrap: wrap;">
                            <button onclick="showDashTab('delegate')" id="dashTabDelegate" class="dash-tab active" style="padding: 10px 16px; background: rgba(0, 212, 255, 0.2); border: none; border-radius: 8px; color: #00FFF0; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.9em;">Делегувати</button>
                            <button onclick="showDashTab('redelegate')" id="dashTabRedelegate" class="dash-tab" style="padding: 10px 16px; background: transparent; border: none; border-radius: 8px; color: #94a3b8; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.9em;">Ределегувати</button>
                            <button onclick="showDashTab('undelegate')" id="dashTabUndelegate" class="dash-tab" style="padding: 10px 16px; background: transparent; border: none; border-radius: 8px; color: #94a3b8; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.9em;">Розділегувати</button>
                            <button onclick="showDashTab('claim')" id="dashTabClaim" class="dash-tab" style="padding: 10px 16px; background: transparent; border: none; border-radius: 8px; color: #94a3b8; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.9em;">Забрати винагороду</button>
                        </div>
                        
                        <!-- Delegate Tab -->
                        <div id="dashDelegateTab" class="dash-tab-content">
                            <p style="color: #cbd5e1; margin-bottom: 12px; font-size: 0.85em;">Мінімальна сума: <strong style="color: #00FFF0;">0.1 TICS</strong></p>
                            <div style="margin-bottom: 15px;">
                                <label style="color: #94a3b8; font-size: 0.85em; margin-bottom: 6px; display: block;">Сума TICS:</label>
                                <input type="number" id="dashDelegateAmount" placeholder="0.1" step="0.1" min="0.1" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 8px; color: #fff; font-size: 1em;">
                            </div>
                            <button onclick="executeDashDelegate()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border: none; border-radius: 10px; color: #000; font-size: 1em; font-weight: 700; cursor: pointer; transition: all 0.3s;">
                                💎 Делегувати на QubeNode
                            </button>
                        </div>
                        
                        <!-- Redelegate Tab -->
                        <div id="dashRedelegateTab" class="dash-tab-content" style="display: none;">
                            <p style="color: #cbd5e1; margin-bottom: 12px; font-size: 0.85em;">Переведіть делегування миттєво</p>
                            
                            <div style="margin-bottom: 12px;">
                                <label style="color: #94a3b8; font-size: 0.85em; margin-bottom: 6px; display: block;">З якого валідатора:</label>
                                <button id="selectFromValidator" onclick="openValidatorModal('from')" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 8px; color: #fff; font-size: 0.95em; text-align: left; cursor: pointer; transition: all 0.3s;">
                                    <span id="fromValidatorText">Оберіть валідатора</span>
                                </button>
                                <input type="hidden" id="dashRedelegateFrom" value="">
                            </div>
                            
                            <div style="margin-bottom: 12px;">
                                <label style="color: #94a3b8; font-size: 0.85em; margin-bottom: 6px; display: block;">Кому делегувати:</label>
                                <button id="selectToValidator" onclick="openValidatorModal('to')" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 8px; color: #fff; font-size: 0.95em; text-align: left; cursor: pointer; transition: all 0.3s;">
                                    <span id="toValidatorText">Оберіть валідатора</span>
                                </button>
                                <input type="hidden" id="dashRedelegateTo" value="">
                            </div>
                            
                            <div style="margin-bottom: 15px;">
                                <label style="color: #94a3b8; font-size: 0.85em; margin-bottom: 6px; display: block;">Сума TICS:</label>
                                <input type="number" id="dashRedelegateAmount" placeholder="0.1" step="0.1" min="0.1" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 8px; color: #fff; font-size: 1em;">
                            </div>
                            
                            <button onclick="executeDashRedelegate()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #A855F7, #6366F1); border: none; border-radius: 10px; color: #fff; font-size: 1em; font-weight: 700; cursor: pointer; transition: all 0.3s;">
                                🔄 Ределегувати
                            </button>
                        </div>
                        
                        <!-- Undelegate Tab -->
                        <div id="dashUndelegateTab" class="dash-tab-content" style="display: none;">
                            <p style="color: #cbd5e1; margin-bottom: 12px; font-size: 0.85em;">Період unbonding: <strong style="color: #ef4444;">14 днів</strong></p>
                            <div style="margin-bottom: 15px;">
                                <label style="color: #94a3b8; font-size: 0.85em; margin-bottom: 6px; display: block;">Сума TICS:</label>
                                <input type="number" id="dashUndelegateAmount" placeholder="0.1" step="0.1" min="0.1" style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.5); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 8px; color: #fff; font-size: 1em;">
                            </div>
                            <button onclick="executeDashUndelegate()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #ef4444, #dc2626); border: none; border-radius: 10px; color: #fff; font-size: 1em; font-weight: 700; cursor: pointer; transition: all 0.3s;">
                                ⬇️ Розділегувати
                            </button>
                        </div>
                        
                        <!-- Claim Tab -->
                        <div id="dashClaimTab" class="dash-tab-content" style="display: none;">
                            <p style="color: #cbd5e1; margin-bottom: 12px; font-size: 0.85em;">Доступні винагороди: <strong style="color: #22c55e;"><span id="dashClaimableRewards">0.00</span> TICS</strong></p>
                            <button onclick="executeDashClaim()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, #22c55e, #16a34a); border: none; border-radius: 10px; color: #fff; font-size: 1em; font-weight: 700; cursor: pointer; transition: all 0.3s;">
                                ✨ Забрати всі винагороди
                            </button>
                        </div>
                    </div>
                    
                    <!-- Transaction Status -->
                    <div id="dashTxStatus" style="display: none; margin-bottom: 15px; padding: 15px; border-radius: 10px; font-size: 0.9em;"></div>
                    
                    <!-- Unbonding Delegations Section -->
                    <div id="unbondingSection" style="background: rgba(239, 68, 68, 0.1); border: 2px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 18px; margin-bottom: 20px; display: none;">
                        <h4 style="color: #ef4444; font-size: 1.1em; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                            <span>⏳</span>
                            <span>Unbonding Delegations</span>
                        </h4>
                        <div id="unbondingList">
                            <!-- Unbonding items will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Disconnect Button -->
                    <div style="text-align: center;">
                        <button onclick="disconnectDashboard()" style="padding: 10px 25px; background: rgba(239, 68, 68, 0.2); border: 2px solid rgba(239, 68, 68, 0.4); border-radius: 30px; color: #ef4444; cursor: pointer; font-weight: 600; transition: all 0.3s; font-size: 0.9em;">
                            🔌 Відключити гаманець
                        </button>
                    </div>
                </div>

                </div>
            </div>
            
            <div class="modal-footer" style="padding: 40px 60px; background: rgba(0, 212, 255, 0.05); border-top: 1px solid rgba(0, 212, 255, 0.2); display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                <a href="https://t.me/+sRnz7RyoL4Q0MWEy" class="modal-link" target="_blank" style="display: inline-flex; align-items: center; gap: 12px; padding: 18px 40px; background: rgba(0, 212, 255, 0.1); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 50px; color: #00D4FF; text-decoration: none; font-weight: 600; font-size: 1.1em; transition: all 0.3s; white-space: nowrap;">
                    <span>💬</span>
                    <span>Підтримка в Telegram</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Validator Selection Modal -->
    <div id="validatorSelectorModal" class="modal" onclick="if(event.target === this) closeModal('validatorSelectorModal')">
        <div class="modal-content">
            <button class="закрити-button" onclick="closeModal('validatorSelectorModal')" style="position: absolute; top: 20px; right: 20px; background: rgba(239, 68, 68, 0.2); border: 2px solid rgba(239, 68, 68, 0.4); padding: 8px 16px; border-radius: 8px; color: #ef4444; cursor: pointer; font-weight: 600; z-index: 10;">✕ Закрити</button>
            
            <h2 id="validatorModalTitle" style="color: #00FFF0; font-size: 1.8em; margin-bottom: 25px; text-align: center;">Select Validator</h2>
            
            <div id="validatorListContainer" style="display: flex; flex-direction: column; gap: 12px;">
                <!-- Validators will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Keplr Guide Modal -->
    <div id="keplrGuideModal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 class="modal-title">📱 Як делегувати через Keplr Mobile</h2>
                <button class="close-button" onclick="closeModal('keplrGuideModal')">&times;</button>
            </div>
            <div class="modal-body" style="padding: 40px;">
                <p style="font-size: 1.1em; color: #cbd5e1; margin-bottom: 30px; line-height: 1.6;">
                    Покрокова інструкція для делегування $TICS через мобільний додаток Keplr:
                </p>
                
                <!-- Steps -->
                <div style="display: flex; flex-direction: column; gap: 20px;">
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">1</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Завантаж Keplr Wallet із App Store або Play Store</p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">2</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Створи новий гаманець</p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">3</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Надійно збережи свою seed-фразу та пароль. <strong style="color: #ef4444;">Ніколи не ділися ними з кимось</strong></p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">4</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Додай Qubetics Mainnet: знайди Qubetics і увімкни його</p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">5</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">На головному екрані натисни <strong style="color: #00FFF0;">Deposit</strong> → знайди Qubetics → скопіюй свою адресу гаманця Qubetics Mainnet (вибираємо <strong style="color: #00FFF0;">EVM адресу</strong>, вона починається з <code style="background: rgba(0,212,255,0.1); padding: 2px 6px; border-radius: 4px; color: #00D4FF;">0x...</code>)</p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">6</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Надішли $TICS на скопійовану адресу</p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">7</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Коли транзакція завершиться й ти побачиш $TICS у своєму гаманці Keplr, натисни <strong style="color: #00FFF0;">Qubetics Mainnet</strong> на головному екрані</p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">8</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Натисни <strong style="color: #00FFF0;">Stake</strong></p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">9</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Натисни <strong style="color: #00FFF0;">Stake</strong> ще раз</p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">10</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Обери валідатор <strong style="color: #00FFF0;">QubeNode</strong></p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">11</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Натисни <strong style="color: #00FFF0;">Stake</strong></p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">12</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Введи суму для стейкінгу (поле <em style="color: #94a3b8;">Memo</em> залишаємо пустим) → натисни <strong style="color: #00FFF0;">Next</strong></p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #00D4FF, #00FFF0); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 1.1em;">13</div>
                        <p style="color: #cbd5e1; margin: 0; padding-top: 5px;">Підтверди транзакцію</p>
                    </div>
                    
                    <div style="display: flex; gap: 15px;">
                        <div style="min-width: 35px; height: 35px; background: linear-gradient(135deg, #22c55e, #16a34a); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #fff; font-size: 1.3em;">✓</div>
                        <p style="color: #22c55e; margin: 0; padding-top: 5px; font-weight: 600; font-size: 1.1em;">Готово! Ти офіційно займаєшся стейкінгом 🎉</p>
                    </div>
                </div>
                
                <div style="background: rgba(34, 197, 94, 0.1); border-left: 4px solid #22c55e; padding: 20px; border-radius: 8px; margin-top: 30px;">
                    <p style="color: #86efac; margin: 0; line-height: 1.6;">
                        <span style="font-size: 1.2em;">✨</span> Тепер ти будеш отримувати винагороди автоматично після кожного блоку!
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Modal -->
    <div id="faqModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">❓ Часті питання (FAQ)</h2>
                <button class="close-button" data-close="faqModal" onclick="closeModal('faqModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p style="font-size: 1.2em; margin-bottom: 40px;">Знайдіть відповіді на найпоширеніші питання про делегування та стейкінг з QubeNode</p>
                
                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Що таке стейкінг і як він працює?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>Стейкінг — це процес блокування ваших монет $TICS для підтримки роботи мережі Qubetics. Коли ви делегуєте монети валідатору, ви допомагаєте забезпечувати безпеку блокчейну та отримуєте винагороду за це. Ваші монети залишаються у вашому гаманці, але беруть участь у консенсусі мережі.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Коли я почну отримувати винагороду?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>Винагорода нараховується <strong>автоматично після кожного створеного блоку</strong>. Перші нарахування можна побачити вже через кілька секунд після делегування. Ви можете переглядати свої винагороди в реальному часі через ваш гаманець або explorer мережі Qubetics.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Чи можу я забрати свої монети в будь-який час?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>Так, ви можете зробити <strong>unbond (розделегувати)</strong> монети в будь-який момент. Після unbond діє період очікування <strong>(unbonding period) тривалістю 14 днів</strong>, після чого монети повернуться у ваш гаманець згідно з правилами мережі Qubetics. Під час періоду unbonding монети не приносять винагороду.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Чи є мінімальна сума для делегування?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>Мінімальної суми для делегування немає.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Чи безпечно делегувати монети?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p><strong>Так, це абсолютно безпечно!</strong> При делегуванні ваші монети <strong>залишаються у вашому гаманці</strong>. Ви не передаєте монети валідатору, а лише делегуєте право на їх використання для валідації блоків. Тільки ви маєте доступ до своїх приватних ключів та можете керувати своїми коштами.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Яка комісія QubeNode?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>Комісія валідатора QubeNode складає <strong>5%</strong> від винагороди мережі. Це найнижча можлива комісія мережі. Вона автоматично утримується з нарахованої винагороди, тому ви отримуєте вже чисту суму.</p>
                        <p><strong>Приклад розрахунку:</strong></p>
                        <p>Ви зробили делегування <strong>1000 монет</strong>. Винагорода мережі (APY) складає <strong>30%</strong> річних, отже за рік вся винагорода мережі складатиме <strong>300 монет</strong>. Звідси забираємо 5% комісію валідатора:</p>
                        <p style="color: #00FFF0; font-weight: 600;">300 монет - 5% комісії = ваша чиста винагорода <strong>285 монет (28.5%)</strong> і винагорода валідатора <strong>15 монет (1.5%)</strong></p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Який APY (річна прибутковість)?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>APY становить <strong>30%</strong> річних. Однак, варто зауважити, що APY є динамічним показником і може змінюватися в залежності від різних факторів, в тому числі загальної кількості застейканих монет у мережі.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Які ризики існують у стейкінгу/делегуванні?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>Основні ризики пов'язані з роботою валідатора:</p>
                        <ul>
                            <li><strong>Downtime (простій):</strong> Якщо валідатор пропустить більше 50% з останніх 100,000 блоків, буде застосовано штраф у розмірі <strong>1%</strong>. Для прикладу, щоб пропустити 50,000 блоків, валідатор має не працювати приблизно <strong>79 годин (більше 3 днів)</strong>.</li>
                        </ul>
                        <p style="margin-top: 15px;"><strong>QubeNode забезпечує вашу безпеку:</strong> Потужна інфраструктура валідатора QubeNode забезпечує стабільну та надійну роботу. Ми використовуємо багаторівневий моніторинг, щоб мінімізувати будь-які ризики простою.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Які гаманці підтримують стейкінг Qubetics?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>Для стейкінга Qubetics ви можете використовувати:</p>
                        <ul>
                            <li><strong>Keplr Wallet</strong> — популярний гаманець для Cosmos екосистеми</li>
                            <li><strong>Cosmostation Wallet</strong> — зручний мобільний та веб-гаманець</li>
                        </ul>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Де можна купити монети $TICS?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>Монети $TICS доступні на наступних централізованих біржах:</p>
                        <ul>
                            <li><strong><a href="https://www.mexc.com/uk-UA/exchange/TICS_USDT?_from=search_spot_trade" target="_blank" style="color: #00D4FF; text-decoration: none; border-bottom: 1px dashed #00D4FF;">MEXC</a></strong></li>
                            <li><strong><a href="https://www.lbank.com/uk/trade/tics_usdt" target="_blank" style="color: #00D4FF; text-decoration: none; border-bottom: 1px dashed #00D4FF;">LBank</a></strong></li>
                            <li><strong><a href="https://www.coinstore.com/spot/TICSUSDT?ts=1760907955300" target="_blank" style="color: #00D4FF; text-decoration: none; border-bottom: 1px dashed #00D4FF;">Coinstore</a></strong></li>
                        </ul>
                        <p>Також можна придбати монети безпосередньо через гаманець Qubetics.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <button class="faq-question" onclick="toggleFaq(this)">
                        <span>❓ Як зв'язатися з підтримкою QubeNode?</span>
                        <span class="faq-icon">▼</span>
                    </button>
                    <div class="faq-answer">
                        <p>Ви можете зв'язатися з нами через:</p>
                        <ul>
                            <li><strong><a href="https://t.me/+sRnz7RyoL4Q0MWEy" target="_blank" style="color: #00D4FF; text-decoration: none; border-bottom: 1px dashed #00D4FF;">Telegram</a>:</strong> Наша група підтримки завжди готова допомогти</li>
                            <li><strong>Email:</strong> <a href="/cdn-cgi/l/email-protection#344255585d5055405b461a454156515a5b5051745359555d581a575b59" style="color: #00D4FF; text-decoration: none; border-bottom: 1px dashed #00D4FF;"><span class="__cf_email__" data-cfemail="1d6b7c7174797c69726f336c687f78737279785d7a707c7471337e7270">[email&#160;protected]</span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer" style="padding: 40px 60px; background: rgba(0, 212, 255, 0.05); border-top: 1px solid rgba(0, 212, 255, 0.2); display: flex; gap: 20px; flex-wrap: wrap; justify-content: center;">
                <button onclick="closeModal('faqModal'); openModal('delegatorModal');" class="modal-link" style="display: inline-flex; align-items: center; gap: 12px; padding: 18px 40px; background: rgba(0, 212, 255, 0.1); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 50px; color: #00D4FF; font-weight: 600; font-size: 1.1em; transition: all 0.3s; cursor: pointer;">
                    <span>🚀</span>
                    <span>Почати стейкінг</span>
                </button>
                <a href="https://t.me/+sRnz7RyoL4Q0MWEy" class="modal-link" target="_blank" style="display: inline-flex; align-items: center; gap: 12px; padding: 18px 40px; background: rgba(0, 212, 255, 0.1); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 50px; color: #00D4FF; text-decoration: none; font-weight: 600; font-size: 1.1em; transition: all 0.3s;">
                    <span>💬</span>
                    <span>Підтримка</span>
                </a>
            </div>
        </div>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // FAQ Accordion Toggle
        function toggleFaq(button) {
            const faqItem = button.parentElement;
            const isActive = faqItem.classList.contains('active');
            
            // Закрити all other FAQ items
            document.querySelectorAll('.faq-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Toggle current item
            if (!isActive) {
                faqItem.classList.add('active');
            }
        }

        function bindЗакритиButtons() {
            var closeButtons = document.querySelectorAll('.close-button[data-close]');
            closeButtons.forEach(function(btn) {
                var modalId = btn.getAttribute('data-close');
                
                // Remove old listeners
                var newBtn = btn.cloneNode(true);
                btn.parentNode.replaceChild(newBtn, btn);
                
                // Touch event for mobile
                newBtn.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    closeModal(modalId);
                }, {passive: false});
                
                // Click event for desktop  
                newBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    closeModal(modalId);
                });
            });
        }
    
        function openModal(id) {
            var modal = document.getElementById(id);
            
            if (modal) {
                modal.classList.add('show');
                modal.style.display = 'block';
                modal.style.zIndex = '100000';
                
                // Check if opening delegator modal
                if (id === 'delegatorModal') {
                    const dashboard = document.getElementById('delegatorDashboard');
                    const walletSection = document.getElementById('walletSection');
                    const walletStatus = document.getElementById('walletStatus');
                    const stakingActions = document.getElementById('stakingActions');
                    
                    // Check if wallet is connected
                    if (headerWalletConnected && cosmosStaking && cosmosStaking.isWalletConnected()) {
                        // Wallet IS connected - hide buttons, show dashboard
                        if (walletSection) walletSection.style.display = 'none';
                        if (walletStatus) walletStatus.style.display = 'none';
                        if (stakingActions) stakingActions.style.display = 'none';
                        if (dashboard) {
                            dashboard.style.display = 'block';
                            updateDashboardData();
                        }
                    } else {
                        // Wallet NOT connected - show buttons, hide dashboard
                        if (walletSection) walletSection.style.display = 'block';
                        if (walletStatus) walletStatus.style.display = 'none';
                        if (stakingActions) stakingActions.style.display = 'none';
                        if (dashboard) dashboard.style.display = 'none';
                        
                        // Reset buttons to enabled state
                        const keplrBtn = document.getElementById('connectKeplrBtn');
                        const cosmostationBtn = document.getElementById('connectCosmostationBtn');
                        if (keplrBtn) {
                            keplrBtn.disabled = false;
                            keplrBtn.innerHTML = '<span style="font-size: 1.2em;">🔷</span><span>Keplr Wallet</span>';
                        }
                        if (cosmostationBtn) {
                            cosmostationBtn.disabled = false;
                            cosmostationBtn.innerHTML = '<span style="font-size: 1.2em;">🔶</span><span>Cosmostation</span>';
                        }
                    }
                }
                
                // ПРИХОВАТИ іконки меню, телеграм та пошти в модальних вікнах
                var iconsContainer = document.getElementById('mobile-icons-container');
                if (iconsContainer) {
                    iconsContainer.style.display = 'none';
                }
                
                // FIX EXCHANGES IMAGES ON MOBILE
                if (window.innerWidth <= 768 && id === 'ticsModal') {
                    setTimeout(function() {
                        var exchangeImgs = document.querySelectorAll('.exchanges-container img');
                        var exchangeLinks = document.querySelectorAll('.exchanges-container a');
                        var container = document.querySelector('.exchanges-container');
                        
                        if (container) container.style.height = '100px';
                        
                        exchangeLinks.forEach(function(link) {
                            link.style.height = '100px';
                        });
                        
                        exchangeImgs.forEach(function(img) {
                            img.style.height = '100px';
                            img.style.maxHeight = '100px';
                        });
                        
                        console.log('✅ Exchange images resized to 100px on mobile');
                    }, 100);
                }
                
                // Bind close button after modal opens
                setTimeout(bindЗакритиButtons, 100);
            }
        }

        function closeModal(id) {
            var modal = document.getElementById(id);
            if (modal) {
                modal.classList.remove('show');
                modal.style.display = 'none';
                
                // ПОКАЗАТИ іконки меню, телеграм та пошти назад (тільки на мобільних)
                var iconsContainer = document.getElementById('mobile-icons-container');
                if (iconsContainer && window.innerWidth <= 768) {
                    iconsContainer.style.display = 'block';
                }
            }
        }

        // === ADVANCED CALCULATOR v2.1 ===
        
        // Global variable for current TICS price (updated from sync.js)
        let currentTicsPrice = 0.047190; // Default value
        
        // Function to set preset amount
        function setAmount(value) {
            document.getElementById('amount').value = value;
            calculateAuto();
        }
        
        // Period handler - clears custom days
        function usePeriod() {
            const period = document.getElementById('period').value;
            if (period) {
                document.getElementById('customDays').value = '';
                calculateAuto();
            }
        }
        
        // Custom days handler - clears period
        function useCustomDays() {
            const days = parseInt(document.getElementById('customDays').value);
            if (days && days > 0) {
                document.getElementById('period').value = '';
                calculateAuto();
            }
        }
        
        // Custom price handler
        let userCustomPrice = null;
        function useCustomPrice() {
            const price = parseFloat(document.getElementById('customPrice').value);
            if (price && price > 0) {
                userCustomPrice = price;
                calculateAuto();
            } else {
                userCustomPrice = null;
                calculateAuto();
            }
        }
        
        // Auto-calculate on any input change
        function calculateAuto() {
            const amount = parseFloat(document.getElementById('amount').value);
            let period = parseInt(document.getElementById('period').value);
            const customDays = parseInt(document.getElementById('customDays').value);
            const compoundFreq = document.getElementById('compoundFrequency').value;
            
            // Use custom days if provided
            if (customDays && customDays > 0) {
                period = customDays / 30; // Convert days to months
            }
            
            if (!amount || amount <= 0 || !period || period <= 0) {
                document.getElementById('calcResults').style.display = 'none';
                return;
            }
            
            // Use custom price or current price
            const priceToUse = userCustomPrice || currentTicsPrice;
            
            // Constants
            const APY = 30; // 30%
            const COMMISSION = 5; // 5%
            const NET_APY = APY * (1 - COMMISSION / 100); // 28.5%
            const ANNUAL_RATE = NET_APY / 100;
            
            // Calculate rewards based on compound frequency
            let finalAmount;
            let totalReward;
            let compoundsPerYear;
            let compoundText;
            
            if (compoundFreq === 'none') {
                // Simple interest (no reinvestment)
                const monthlyRate = ANNUAL_RATE / 12;
                const monthlyReward = amount * monthlyRate;
                totalReward = monthlyReward * period;
                finalAmount = amount + totalReward;
                compoundText = 'Без реінвестування';
            } else {
                // Compound interest with different frequencies
                switch(compoundFreq) {
                    case 'daily':
                        compoundsPerYear = 365;
                        compoundText = 'Щоденне (вручну)';
                        break;
                    case 'weekly':
                        compoundsPerYear = 52;
                        compoundText = 'Щотижневе (вручну)';
                        break;
                    case 'monthly':
                        compoundsPerYear = 12;
                        compoundText = 'Щомісячне (вручну)';
                        break;
                    case 'quarterly':
                        compoundsPerYear = 4;
                        compoundText = 'Щоквартальне (вручну)';
                        break;
                }
                
                // Compound formula: A = P(1 + r/n)^(nt)
                const ratePerPeriod = ANNUAL_RATE / compoundsPerYear;
                const totalPeriods = compoundsPerYear * (period / 12);
                finalAmount = amount * Math.pow(1 + ratePerPeriod, totalPeriods);
                totalReward = finalAmount - amount;
            }
            
            // Calculate daily reward based on actual days per year (365)
            const daysInPeriod = (period / 12) * 365; // Convert months to days
            const dailyReward = totalReward / daysInPeriod;
            const weeklyReward = dailyReward * 7; // Weekly = daily × 7
            const monthlyReward = totalReward / period;
            
            // Update UI
            document.getElementById('calcResults').style.display = 'block';
            
            // Summary cards
            document.getElementById('dailyResult').textContent = dailyReward.toFixed(2) + ' TICS';
            document.getElementById('dailyUSD').textContent = '$' + (dailyReward * priceToUse).toFixed(2);
            
            document.getElementById('weeklyResult').textContent = weeklyReward.toFixed(2) + ' TICS';
            document.getElementById('weeklyUSD').textContent = '$' + (weeklyReward * priceToUse).toFixed(2);
            
            document.getElementById('monthlyResult').textContent = monthlyReward.toFixed(2) + ' TICS';
            document.getElementById('monthlyUSD').textContent = '$' + (monthlyReward * priceToUse).toFixed(2);
            
            document.getElementById('totalResult').textContent = totalReward.toFixed(2) + ' TICS';
            document.getElementById('totalUSD').textContent = '$' + (totalReward * priceToUse).toFixed(2);
            
            // Calculate commission breakdown based on ACTUAL totalReward (includes compound if enabled)
            // Total reward is what user actually gets (28.5% APY already applied)
            // To get gross reward, we need to reverse the commission: netReward = grossReward * 0.95
            // So: grossReward = netReward / 0.95
            const netReward = totalReward; // User's reward (already has 28.5% APY with 5% commission deducted)
            const grossReward = netReward / 0.95; // Back-calculate gross reward before commission
            const validatorCommission = grossReward - netReward; // Commission = gross - net
            
            // Detailed breakdown
            document.getElementById('initialAmount').textContent = amount.toLocaleString() + ' TICS ($' + (amount * priceToUse).toFixed(2) + ')';
            document.getElementById('periodText').textContent = getPeriodText(period, customDays);
            document.getElementById('compoundText').textContent = compoundText;
            
            // New detailed fields
            document.getElementById('totalRewardAmount').textContent = grossReward.toFixed(2) + ' TICS ($' + (grossReward * priceToUse).toFixed(2) + ')';
            document.getElementById('validatorCommissionAmount').textContent = validatorCommission.toFixed(2) + ' TICS ($' + (validatorCommission * priceToUse).toFixed(2) + ')';
            document.getElementById('netRewardAmount').textContent = netReward.toFixed(2) + ' TICS ($' + (netReward * priceToUse).toFixed(2) + ')';
            
            document.getElementById('finalAmount').textContent = finalAmount.toFixed(2) + ' TICS ($' + (finalAmount * priceToUse).toFixed(2) + ')';
            
            // Compound comparison (show only if reinvesting)
            if (compoundFreq !== 'none') {
                const monthlyRate = ANNUAL_RATE / 12;
                const withoutCompoundReward = amount * monthlyRate * period;
                const withoutCompoundFinal = amount + withoutCompoundReward;
                const benefit = finalAmount - withoutCompoundFinal;
                
                document.getElementById('compoundComparison').style.display = 'block';
                document.getElementById('withoutCompound').textContent = withoutCompoundFinal.toFixed(2) + ' TICS';
                document.getElementById('withCompound').textContent = finalAmount.toFixed(2) + ' TICS';
                document.getElementById('compoundBenefit').textContent = '+' + benefit.toFixed(2) + ' TICS ($' + (benefit * priceToUse).toFixed(2) + ')';
            } else {
                document.getElementById('compoundComparison').style.display = 'none';
            }
        }
        
        // Helper function to get period text
        function getPeriodText(months, customDays) {
            if (customDays && customDays > 0) {
                return customDays + ' днів';
            }
            if (months === 1) return '1 місяць';
            if (months === 3) return '3 місяці';
            if (months === 6) return '6 місяців';
            if (months === 12) return '1 рік';
            if (months === 24) return '2 роки';
            if (months === 36) return '3 роки';
            if (months === 48) return '4 роки';
            if (months === 60) return '5 років';
            return months.toFixed(1) + ' місяців';
        }
        
        // Update TICS price from sync.js (called from updateTicsPrice function)
        function updateCalculatorPrice(price) {
            if (price && price > 0) {
                currentTicsPrice = price;
                // Update display
                const displayEl = document.getElementById('currentPriceDisplay');
                if (displayEl) {
                    displayEl.textContent = price.toFixed(4);
                }
                // Recalculate if results are visible
                if (document.getElementById('calcResults').style.display !== 'none') {
                    calculateAuto();
                }
            }
        }

        // Bind menu items using data-modal attribute
        document.addEventListener('DOMContentLoaded', function() {
            var menuItems = document.querySelectorAll('.mobile-menu-item[data-modal]');
            
            menuItems.forEach(function(item) {
                var modalId = item.getAttribute('data-modal');
                
                // Touch event for mobile
                item.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    
                    // Закрити menu
                    document.getElementById('menu-toggle').checked = false;
                    
                    // Open modal with small delay
                    setTimeout(function() {
                        openModal(modalId);
                    }, 300);
                }, {passive: false});
                
                // Click event for desktop
                item.addEventListener('click', function(e) {
                    // Закрити menu
                    document.getElementById('menu-toggle').checked = false;
                    
                    // Open modal with small delay
                    setTimeout(function() {
                        openModal(modalId);
                    }, 300);
                });
            });
            
            // Bind close buttons on page load
            bindЗакритиButtons();
        });

        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('show');
                event.target.style.display = 'none';
            }
        }

        // Cosmos Staking Functions
        let cosmosStaking = null;
        let stakingModuleReady = false;

        // Wait for all modules to load
        window.addEventListener('DOMContentLoaded', function() {
            // Initialize wallet dropdown - make sure it's hidden
            const dropdown = document.getElementById('headerWalletDropdown');
            if (dropdown) {
                dropdown.classList.remove('show');
                dropdown.style.display = 'none';
            }
            
            // Check if CosmosStakingModule is available
            const checkModules = setInterval(function() {
                if (typeof CosmosStakingModule !== 'undefined' && 
                    typeof QUBETICS_CHAIN_CONFIG !== 'undefined' && 
                    typeof VALIDATOR_CONFIG !== 'undefined') {
                    stakingModuleReady = true;
                    clearInterval(checkModules);
                    console.log('✅ Cosmos Staking Module ready');
                }
            }, 100);
        });

        async function initializeStaking() {
            if (!cosmosStaking) {
                if (!stakingModuleReady) {
                    throw new Error('Модулі стейкінгу ще завантажуються, спробуйте через секунду');
                }
                cosmosStaking = new CosmosStakingModule();
                await cosmosStaking.initialize();
            }
        }

        async function connectWallet(walletType) {
            try {
                // Disable buttons and show loading
                const keplrBtn = document.getElementById('connectKeplrBtn');
                const cosmostationBtn = document.getElementById('connectCosmostationBtn');
                
                if (keplrBtn) keplrBtn.disabled = true;
                if (cosmostationBtn) cosmostationBtn.disabled = true;
                
                if (walletType === 'keplr' && keplrBtn) {
                    keplrBtn.innerHTML = '<span>⏳</span><span>Підключення...</span>';
                } else if (cosmostationBtn) {
                    cosmostationBtn.innerHTML = '<span>⏳</span><span>Підключення...</span>';
                }

                await initializeStaking();
                const result = await cosmosStaking.connectWallet(walletType);

                if (result.success) {
                    // Hide old interface
                    const stakingInterface = document.getElementById('stakingInterface');
                    if (stakingInterface) {
                        stakingInterface.style.display = 'none';
                    }
                    
                    // Show dashboard
                    const dashboard = document.getElementById('delegatorDashboard');
                    if (dashboard) {
                        dashboard.style.display = 'block';
                    }
                    
                    // Update dashboard data
                    await updateDashboardData();
                    
                    // Update header
                    headerWalletConnected = true;
                    await updateHeaderWalletDisplay();
                }
            } catch (error) {
                console.error('Connection error:', error);
                alert('Помилка підключення: ' + error.message);
                
                // Reset buttons
                const keplrBtn = document.getElementById('connectKeplrBtn');
                const cosmostationBtn = document.getElementById('connectCosmostationBtn');
                
                if (keplrBtn) {
                    keplrBtn.disabled = false;
                    keplrBtn.innerHTML = '<span style="font-size: 1.3em;">🔷</span><span>Keplr Wallet</span>';
                }
                if (cosmostationBtn) {
                    cosmostationBtn.disabled = false;
                    cosmostationBtn.innerHTML = '<span style="font-size: 1.3em;">🔶</span><span>Cosmostation</span>';
                }
            }
        }

        async function disconnectWallet() {
            if (cosmosStaking) {
                cosmosStaking.disconnect();
            }
            
            document.getElementById('walletSection').style.display = 'block';
            document.getElementById('walletStatus').style.display = 'none';
            document.getElementById('stakingActions').style.display = 'none';
            document.getElementById('connectKeplrBtn').disabled = false;
            document.getElementById('connectCosmostationBtn').disabled = false;
            document.getElementById('connectKeplrBtn').innerHTML = '<span style="font-size: 1.3em;">🔷</span><span>Keplr Wallet</span>';
        }

        // DASHBOARD FUNCTIONS
        


        // =====================================================================
        // PROFESSIONAL MODAL WINDOW SYSTEM
        // =====================================================================
        
        function createModal(title, content, onConfirm, confirmText = 'Підтвердити') {
            // Remove existing modal if any
            const existing = document.getElementById('customModalOverlay');
            if (existing) existing.remove();
            
            // Create overlay
            const overlay = document.createElement('div');
            overlay.id = 'customModalOverlay';
            overlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.85);
                backdrop-filter: blur(10px);
                z-index: 99999;
                display: flex;
                align-items: center;
                justify-content: center;
                animation: fadeIn 0.2s ease;
            `;
            
            // Create modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
                border: 2px solid rgba(0, 212, 255, 0.4);
                border-radius: 20px;
                padding: 30px;
                max-width: 500px;
                width: 90%;
                max-height: 90vh;
                overflow-y: auto;
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
                animation: slideUp 0.3s ease;
            `;
            
            modal.innerHTML = `
                <style>
                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    @keyframes slideUp {
                        from { transform: translateY(30px); opacity: 0; }
                        to { transform: translateY(0); opacity: 1; }
                    }
                    #customModalOverlay input:focus {
                        outline: none;
                        border-color: rgba(0, 212, 255, 0.6) !important;
                        box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
                    }
                    #customModalOverlay select:focus {
                        outline: none;
                        border-color: rgba(0, 212, 255, 0.6) !important;
                        box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
                    }
                </style>
                <div style="margin-bottom: 25px;">
                    <h3 style="color: #FFA500; font-size: 1.5em; margin: 0; text-align: center;">${title}</h3>
                </div>
                
                <div id="modalContent">
                    ${content}
                </div>
                
                <div style="display: flex; gap: 12px; margin-top: 25px;">
                    <button onclick="closeCustomModal()" style="flex: 1; padding: 14px; background: rgba(100, 116, 139, 0.2); border: 1px solid rgba(100, 116, 139, 0.4); border-radius: 12px; color: #94a3b8; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                        Скасувати
                    </button>
                    <button id="modalConfirmBtn" style="flex: 1; padding: 14px; background: linear-gradient(135deg, #FFA500, #FF8C00); border: none; border-radius: 12px; color: #000; font-size: 1em; font-weight: 700; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 12px rgba(255, 165, 0, 0.3);">
                        ${confirmText}
                    </button>
                </div>
            `;
            
            overlay.appendChild(modal);
            document.body.appendChild(overlay);
            
            // Set up confirm button
            document.getElementById('modalConfirmBtn').onclick = onConfirm;
            
            // Close on overlay click
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) closeCustomModal();
            });
            
            // Focus first input
            setTimeout(() => {
                const firstInput = modal.querySelector('input, select');
                if (firstInput) firstInput.focus();
            }, 100);
        }
        
        function closeCustomModal() {
            const overlay = document.getElementById('customModalOverlay');
            if (overlay) {
                overlay.style.animation = 'fadeOut 0.2s ease';
                setTimeout(() => overlay.remove(), 200);
            }
        }
        
        // =====================================================================
        // STAKE MORE MODAL
        // =====================================================================
        
        function showStakeMoreModal(validatorAddress, validatorName) {
            const overview = cosmosStaking ? cosmosStaking.getStakingOverview() : null;
            const available = overview ? cosmosStaking.formatTics(overview.balance) : '0';
            
            const content = `
                <div style="background: rgba(0, 212, 255, 0.1); border: 1px solid rgba(0, 212, 255, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="color: #00FFF0; font-weight: 600; margin-bottom: 8px; font-size: 1.1em;">${validatorName}</div>
                    <div style="color: #64748b; font-size: 0.85em; font-family: monospace; word-break: break-all;">${validatorAddress}</div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="color: #94a3b8; font-size: 0.9em; display: block; margin-bottom: 8px; font-weight: 500;">Сума для делегування (TICS)</label>
                    <input 
                        type="number" 
                        id="stakeAmount" 
                        placeholder="0.00"
                        min="0.1"
                        step="0.1"
                        style="width: 100%; padding: 14px; background: rgba(15, 23, 42, 0.6); border: 2px solid rgba(0, 212, 255, 0.3); border-radius: 10px; color: #fff; font-size: 1.2em; font-weight: 600; text-align: center;"
                    />
                    <div style="color: #64748b; font-size: 0.85em; margin-top: 8px; display: flex; justify-content: space-between;">
                        <span>Мінімум: 0.1 TICS</span>
                        <span>Доступно: ${parseFloat(available).toFixed(2)} TICS</span>
                    </div>
                </div>
                
                <div style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 10px; padding: 12px; margin-bottom: 10px;">
                    <div style="color: #86efac; font-size: 0.85em;">
                        ✅ Почнете отримувати винагороди одразу після делегування
                    </div>
                </div>
            `;
            
            createModal('💎 Делегувати більше', content, async () => {
                const amount = document.getElementById('stakeAmount').value;
                
                if (!amount || isNaN(amount) || parseFloat(amount) < 0.1) {
                    alert('Мінімальна сума: 0.1 TICS');
                    return;
                }
                
                closeCustomModal();
                
                try {
                    showDashTxStatus('processing', 'Обробка транзакції...');
                    const result = await cosmosStaking.delegate(parseFloat(amount), 'Stake more to ' + validatorName);
                    showDashTxStatus('success', `Успішно! TX: ${result.txHash}`);
                    
                    // Refresh dashboard
                    setTimeout(async () => { await updateDashboardData(); }, 3000);
                    let refreshCount = 0;
                    const refreshInterval = setInterval(async () => {
                        refreshCount++;
                        await updateDashboardData();
                        if (refreshCount >= 6) clearInterval(refreshInterval);
                    }, 5000);
                } catch (error) {
                    showDashTxStatus('error', 'Помилка: ' + error.message);
                }
            }, 'Делегувати');
        }
        
        // =====================================================================
        // SWITCH VALIDATOR MODAL (Redelegate)
        // =====================================================================
        
        function showSwitchValidatorModal(fromValidatorAddress, fromValidatorName) {
            const overview = cosmosStaking ? cosmosStaking.getStakingOverview() : null;
            
            // Get current delegation amount
            let currentAmount = '0';
            if (overview && overview.delegations) {
                const delegation = overview.delegations.find(d => d.delegation.validator_address === fromValidatorAddress);
                if (delegation) {
                    currentAmount = cosmosStaking.formatTics(delegation.balance.amount);
                }
            }
            
            // Get list of other validators
            let validatorOptions = '';
            if (overview && overview.delegations) {
                overview.delegations.forEach(del => {
                    const addr = del.delegation.validator_address;
                    if (addr !== fromValidatorAddress) {
                        const name = validatorNamesCache[addr] || addr.substring(0, 20) + '...';
                        validatorOptions += `<option value="${addr}">${name}</option>`;
                    }
                });
            }
            
            // Add QubeNode if not in list
            const qubenodeAddr = 'qubeticsvaloper1tzk9f84cv2gmk3du3m9dpxcuph70sfj6uf6kld';
            if (fromValidatorAddress !== qubenodeAddr) {
                validatorOptions = `<option value="${qubenodeAddr}">QubeNode 🏆</option>` + validatorOptions;
            }
            
            const content = `
                <div style="background: rgba(168, 85, 247, 0.1); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="color: #a855f7; font-weight: 600; margin-bottom: 8px;">З валідатора:</div>
                    <div style="color: #c084fc; font-size: 1.1em; font-weight: 700;">${fromValidatorName}</div>
                    <div style="color: #64748b; font-size: 0.8em; margin-top: 5px;">Делеговано: ${parseFloat(currentAmount).toFixed(2)} TICS</div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="color: #94a3b8; font-size: 0.9em; display: block; margin-bottom: 8px; font-weight: 500;">Кому делегувати:</label>
                    <select 
                        id="toValidator" 
                        style="width: 100%; padding: 14px; background: rgba(15, 23, 42, 0.6); border: 2px solid rgba(168, 85, 247, 0.3); border-radius: 10px; color: #fff; font-size: 1em; font-weight: 600;"
                    >
                        ${validatorOptions}
                    </select>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="color: #94a3b8; font-size: 0.9em; display: block; margin-bottom: 8px; font-weight: 500;">Сума для переведення (TICS)</label>
                    <input 
                        type="number" 
                        id="redelegateAmount" 
                        placeholder="0.00"
                        min="0.1"
                        max="${currentAmount}"
                        step="0.1"
                        style="width: 100%; padding: 14px; background: rgba(15, 23, 42, 0.6); border: 2px solid rgba(168, 85, 247, 0.3); border-radius: 10px; color: #fff; font-size: 1.2em; font-weight: 600; text-align: center;"
                    />
                    <div style="color: #64748b; font-size: 0.85em; margin-top: 8px;">
                        Максимум: ${parseFloat(currentAmount).toFixed(2)} TICS
                    </div>
                </div>
                
                <div style="background: rgba(250, 204, 21, 0.1); border: 1px solid rgba(250, 204, 21, 0.3); border-radius: 10px; padding: 12px;">
                    <div style="color: #fde047; font-size: 0.85em;">
                        ⚠️ Ределегування миттєве, але можна робити лише раз на 21 день
                    </div>
                </div>
            `;
            
            createModal('🔄 Переключити валідатора', content, async () => {
                const toAddr = document.getElementById('toValidator').value;
                const amount = document.getElementById('redelegateAmount').value;
                
                if (!amount || isNaN(amount) || parseFloat(amount) < 0.1) {
                    alert('Мінімальна сума: 0.1 TICS');
                    return;
                }
                
                if (parseFloat(amount) > parseFloat(currentAmount)) {
                    alert('Сума перевищує делеговану кількість');
                    return;
                }
                
                if (!toAddr) {
                    alert('Оберіть валідатора');
                    return;
                }
                
                closeCustomModal();
                
                try {
                    showDashTxStatus('processing', 'Обробка транзакції...');
                    const result = await cosmosStaking.redelegate(
                        fromValidatorAddress,
                        toAddr,
                        parseFloat(amount),
                        'Redelegate from ' + fromValidatorName
                    );
                    showDashTxStatus('success', `Успішно! TX: ${result.txHash}`);
                    
                    // Refresh dashboard
                    setTimeout(async () => { await updateDashboardData(); }, 3000);
                    let refreshCount = 0;
                    const refreshInterval = setInterval(async () => {
                        refreshCount++;
                        await updateDashboardData();
                        if (refreshCount >= 6) clearInterval(refreshInterval);
                    }, 5000);
                } catch (error) {
                    showDashTxStatus('error', 'Помилка: ' + error.message);
                }
            }, 'Переключити');
        }
        
        // =====================================================================
        // UNBOND MODAL
        // =====================================================================
        
        function showUnbondModal(validatorAddress, validatorName) {
            const overview = cosmosStaking ? cosmosStaking.getStakingOverview() : null;
            
            // Get current delegation amount
            let currentAmount = '0';
            if (overview && overview.delegations) {
                const delegation = overview.delegations.find(d => d.delegation.validator_address === validatorAddress);
                if (delegation) {
                    currentAmount = cosmosStaking.formatTics(delegation.balance.amount);
                }
            }
            
            const content = `
                <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="color: #ef4444; font-weight: 600; margin-bottom: 8px; font-size: 1.1em;">${validatorName}</div>
                    <div style="color: #64748b; font-size: 0.85em;">Делеговано: ${parseFloat(currentAmount).toFixed(2)} TICS</div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="color: #94a3b8; font-size: 0.9em; display: block; margin-bottom: 8px; font-weight: 500;">Сума для розділегування (TICS)</label>
                    <input 
                        type="number" 
                        id="unbondAmount" 
                        placeholder="0.00"
                        min="0.1"
                        max="${currentAmount}"
                        step="0.1"
                        style="width: 100%; padding: 14px; background: rgba(15, 23, 42, 0.6); border: 2px solid rgba(239, 68, 68, 0.3); border-radius: 10px; color: #fff; font-size: 1.2em; font-weight: 600; text-align: center;"
                    />
                    <div style="color: #64748b; font-size: 0.85em; margin-top: 8px;">
                        Максимум: ${parseFloat(currentAmount).toFixed(2)} TICS
                    </div>
                </div>
                
                <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 10px; padding: 12px;">
                    <div style="color: #fca5a5; font-size: 0.85em; margin-bottom: 8px;">
                        ⚠️ <strong>Важливо:</strong> Період очікування - 14 днів
                    </div>
                    <div style="color: #64748b; font-size: 0.8em;">
                        Після розділегування токени будуть недоступні протягом 14 днів. В цей період вони не приносять винагород і не можуть бути переведені.
                    </div>
                </div>
            `;
            
            createModal('⛔ Розділегувати', content, async () => {
                const amount = document.getElementById('unbondAmount').value;
                
                if (!amount || isNaN(amount) || parseFloat(amount) < 0.1) {
                    alert('Мінімальна сума: 0.1 TICS');
                    return;
                }
                
                if (parseFloat(amount) > parseFloat(currentAmount)) {
                    alert('Сума перевищує делеговану кількість');
                    return;
                }
                
                if (!confirm(`Розділегувати ${amount} TICS від ${validatorName}?

Перів очікування: 14 днів`)) {
                    return;
                }
                
                closeCustomModal();
                
                try {
                    showDashTxStatus('processing', 'Обробка транзакції...');
                    const result = await cosmosStaking.undelegate(parseFloat(amount), 'Unbond from ' + validatorName);
                    showDashTxStatus('success', `Успішно! TX: ${result.txHash}. Очікуйте 14 днів.`);
                    
                    // Refresh dashboard
                    setTimeout(async () => { await updateDashboardData(); }, 3000);
                    let refreshCount = 0;
                    const refreshInterval = setInterval(async () => {
                        refreshCount++;
                        await updateDashboardData();
                        if (refreshCount >= 6) clearInterval(refreshInterval);
                    }, 5000);
                } catch (error) {
                    showDashTxStatus('error', 'Помилка: ' + error.message);
                }
            }, 'Розділегувати');
        }
        
        // =====================================================================
        // CLAIM REWARDS MODAL
        // =====================================================================
        
        function showClaimRewardsModal() {
            const overview = cosmosStaking ? cosmosStaking.getStakingOverview() : null;
            
            if (!overview || !overview.delegations || overview.delegations.length === 0) {
                alert('Немає активних делегувань');
                return;
            }
            
            const totalRewards = overview.totalRewards ? (parseFloat(overview.totalRewards) / 1e18).toFixed(4) : '0.0000';
            
            let validatorsList = '';
            overview.delegations.forEach(del => {
                const addr = del.delegation.validator_address;
                const name = validatorNamesCache[addr] || addr.substring(0, 20) + '...';
                
                let rewards = '0.0000';
                if (overview.rewards && overview.rewards.rewards) {
                    const rewardEntry = overview.rewards.rewards.find(r => r.validator_address === addr);
                    if (rewardEntry && rewardEntry.reward && rewardEntry.reward.length > 0) {
                        const ticsReward = rewardEntry.reward.find(r => r.denom === 'tics');
                        if (ticsReward) {
                            rewards = (parseFloat(ticsReward.amount) / 1e18).toFixed(4);
                        }
                    }
                }
                
                validatorsList += `
                    <div style="display: flex; justify-content: space-between; padding: 10px; background: rgba(250, 204, 21, 0.05); border-radius: 8px; margin-bottom: 8px;">
                        <span style="color: #94a3b8; font-size: 0.9em;">${name}</span>
                        <span style="color: #facc15; font-weight: 600; font-size: 0.9em;">${rewards} TICS</span>
                    </div>
                `;
            });
            
            const content = `
                <div style="background: rgba(250, 204, 21, 0.15); border: 2px solid rgba(250, 204, 21, 0.4); border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: center;">
                    <div style="color: #fde047; font-size: 0.9em; margin-bottom: 8px;">Всього винагород:</div>
                    <div style="color: #facc15; font-size: 2em; font-weight: 700;">${totalRewards} TICS</div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="color: #94a3b8; font-size: 0.9em; margin-bottom: 12px; font-weight: 600;">Винагороди від валідаторів:</div>
                    ${validatorsList}
                </div>
                
                <div style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 10px; padding: 12px;">
                    <div style="color: #86efac; font-size: 0.85em;">
                        ✅ Всі винагороди будуть зібрані в одній транзакції
                    </div>
                </div>
            `;
            
            createModal('💰 Забрати винагороди', content, async () => {
                closeCustomModal();
                
                try {
                    showDashTxStatus('processing', 'Обробка транзакції...');
                    const result = await cosmosStaking.claimRewards('Claim all rewards');
                    showDashTxStatus('success', `Всі винагороди зібрано! TX: ${result.txHash}`);
                    
                    // Refresh dashboard
                    setTimeout(async () => { await updateDashboardData(); }, 3000);
                    let refreshCount = 0;
                    const refreshInterval = setInterval(async () => {
                        refreshCount++;
                        await updateDashboardData();
                        if (refreshCount >= 6) clearInterval(refreshInterval);
                    }, 5000);
                } catch (error) {
                    showDashTxStatus('error', 'Помилка: ' + error.message);
                }
            }, 'Забрати');
        }

        // =====================================================================
        // QUICK ACTION FUNCTIONS FOR VALIDATOR CARDS
        // =====================================================================
        
        function quickStakeMore(validatorAddress) {
            const validatorName = validatorNamesCache[validatorAddress] || validatorAddress.substring(0, 20) + '...';
            showStakeMoreModal(validatorAddress, validatorName);
        }
        
        function quickSwitchValidator(fromValidatorAddress) {
            const validatorName = validatorNamesCache[fromValidatorAddress] || fromValidatorAddress.substring(0, 20) + '...';
            showSwitchValidatorModal(fromValidatorAddress, validatorName);
        }
        
        function quickUnbond(validatorAddress) {
            const validatorName = validatorNamesCache[validatorAddress] || validatorAddress.substring(0, 20) + '...';
            showUnbondModal(validatorAddress, validatorName);
        }
        
        function quickStakeQubeNode() {
            const qubenodeAddress = 'qubeticsvaloper1tzk9f84cv2gmk3du3m9dpxcuph70sfj6uf6kld';
            showStakeMoreModal(qubenodeAddress, 'QubeNode 🏆');
        }
        
        function quickClaimAllRewards() {
            showClaimRewardsModal();
        }

        async function updateDashboardData() {
            try {
                const overview = await cosmosStaking.refresh();
                
                const balance = cosmosStaking.formatTics(overview.balance);
                const delegated = cosmosStaking.formatTics(overview.totalDelegated);
                const rewards = cosmosStaking.formatTics(overview.totalRewards);
                
                // Calculate unbonding - FIXED to use unbondingDelegations
                let unbonding = '0';
                console.log('Unbonding data:', overview.unbondingDelegations); // Debug
                
                if (overview.unbondingDelegations && Array.isArray(overview.unbondingDelegations) && overview.unbondingDelegations.length > 0) {
                    let totalUnbonding = BigInt(0);
                    overview.unbondingDelegations.forEach(unbondingItem => {
                        if (unbondingItem.entries && Array.isArray(unbondingItem.entries)) {
                            unbondingItem.entries.forEach(entry => {
                                if (entry.balance) {
                                    totalUnbonding += BigInt(entry.balance);
                                }
                            });
                        }
                    });
                    
                    if (totalUnbonding > BigInt(0)) {
                        unbonding = cosmosStaking.formatTics(totalUnbonding.toString());
                    }
                }

                // Update dashboard displays with 2 decimal places
                document.getElementById('dashBalance').textContent = parseFloat(balance).toFixed(2);
                document.getElementById('dashDelegated').textContent = parseFloat(delegated).toFixed(2);
                document.getElementById('dashRewards').textContent = parseFloat(rewards).toFixed(2);
                document.getElementById('dashUnbonding').textContent = parseFloat(unbonding).toFixed(2);
                document.getElementById('dashClaimableRewards').textContent = parseFloat(rewards).toFixed(2);
                
                // Update delegations list if exists
                if (document.getElementById('dashDelegationsList')) {
                    updateDelegationsList(overview);
                }
                
                // Update rewards forecast if exists
                if (document.getElementById('dashRewardsForecast')) {
                    updateRewardsForecast(overview);
                }
                
                // Update unbonding list if exists
                if (document.getElementById('unbondingList')) {
                    updateUnbondingList(overview);
                }
            } catch (error) {
                console.error('Error updating dashboard data:', error);
            }
        }

        // Update Unbonding List
        function updateUnbondingList(overview) {
            const section = document.getElementById('unbondingSection');
            const container = document.getElementById('unbondingList');
            
            if (!overview.unbondingDelegations || overview.unbondingDelegations.length === 0) {
                section.style.display = 'none';
                return;
            }
            
            // Check if there are any actual entries
            let hasEntries = false;
            overview.unbondingDelegations.forEach(unbonding => {
                if (unbonding.entries && unbonding.entries.length > 0) {
                    hasEntries = true;
                }
            });
            
            if (!hasEntries) {
                section.style.display = 'none';
                return;
            }
            
            section.style.display = 'block';
            let html = '<div style="display: flex; flex-direction: column; gap: 12px;">';
            
            overview.unbondingDelegations.forEach(unbonding => {
                const valAddress = unbonding.validator_address;
                const validatorName = validatorNamesCache[valAddress] || valAddress.substring(0, 20) + '...';
                
                if (unbonding.entries && unbonding.entries.length > 0) {
                    unbonding.entries.forEach(entry => {
                        const amount = cosmosStaking.formatTics(entry.balance);
                        const completionTime = new Date(entry.completion_time);
                        const now = new Date();
                        const timeRemaining = Math.max(0, completionTime - now);
                        const daysRemaining = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
                        const hoursRemaining = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        
                        html += `
                            <div style="background: rgba(239, 68, 68, 0.05); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 10px; padding: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                    <div style="flex: 1;">
                                        <div style="color: #ef4444; font-weight: 700; font-size: 1.1em; margin-bottom: 5px;">${parseFloat(amount).toFixed(4)} TICS</div>
                                        <div style="color: #fff; font-weight: 600; font-size: 0.9em; margin-bottom: 3px;">From: ${validatorName}</div>
                                        <div style="color: #64748b; font-size: 0.75em;">${valAddress}</div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="color: #94a3b8; font-size: 0.75em; margin-bottom: 3px;">Completion</div>
                                        <div style="color: #fff; font-size: 0.85em; font-weight: 600;">${completionTime.toLocaleString('uk-UA', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' })}</div>
                                    </div>
                                </div>
                                
                                <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                                    <div style="color: #94a3b8; font-size: 0.75em; margin-bottom: 3px;">Time Remaining</div>
                                    <div style="color: #FFA500; font-size: 1em; font-weight: 700;">${daysRemaining}d ${hoursRemaining}h</div>
                                </div>
                                
                                <button onclick="executeCancelUnbonding('${valAddress}', '${amount}', ${entry.creation_height})" style="width: 100%; padding: 10px; background: rgba(239, 68, 68, 0.2); border: 2px solid rgba(239, 68, 68, 0.4); border-radius: 8px; color: #ef4444; font-size: 0.9em; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                                    Cancel Unbonding
                                </button>
                            </div>
                        `;
                    });
                }
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        async function executeCancelUnbonding(validatorAddress, amount, creationHeight) {
            try {
                if (!confirm(`Скасувати unbonding ${amount} TICS?\n\nТокени будуть знову делеговані на валідатора.`)) {
                    return;
                }
                
                showDashTxStatus('processing', 'Обробка транзакції...');
                
                const result = await cosmosStaking.cancelUnbonding(validatorAddress, amount, creationHeight, 'Cancel unbonding via QubeNode.space');
                
                showDashTxStatus('success', `Успішно скасовано! TX: ${result.txHash}`);
                
                setTimeout(async () => {
                    await updateDashboardData();
                }, 2000);
                
            } catch (error) {
                showDashTxStatus('error', 'Помилка: ' + error.message);
            }
        }

        function showDashTab(tab) {
            document.querySelectorAll('.dash-tab').forEach(btn => {
                btn.style.background = 'transparent';
                btn.style.color = '#94a3b8';
            });
            document.querySelectorAll('.dash-tab-content').forEach(content => {
                content.style.display = 'none';
            });

            document.getElementById('dashTab' + tab.charAt(0).toUpperCase() + tab.slice(1)).style.background = 'rgba(0, 212, 255, 0.2)';
            document.getElementById('dashTab' + tab.charAt(0).toUpperCase() + tab.slice(1)).style.color = '#00FFF0';
            document.getElementById('dash' + tab.charAt(0).toUpperCase() + tab.slice(1) + 'Tab').style.display = 'block';
        }

        async function executeDashDelegate() {
            const amount = parseFloat(document.getElementById('dashDelegateAmount').value);
            
            if (!amount || amount < 0.1) {
                alert('Мінімальна сума делегування: 0.1 TICS');
                return;
            }

            try {
                showDashTxStatus('processing', 'Обробка транзакції...');
                
                const result = await cosmosStaking.delegate(amount, 'Delegation via QubeNode.space');
                
                showDashTxStatus('success', `Успішно! TX: ${result.txHash}`);
                
                // Clear input field immediately
                document.getElementById('dashDelegateAmount').value = '';
                
                // Refresh every 5 seconds for 30 seconds (6 times)
                let refreshCount = 0;
                const maxRefreshes = 6;
                const refreshInterval = setInterval(async () => {
                    refreshCount++;
                    console.log(`🔄 Auto-refresh #${refreshCount} after delegate...`);
                    await updateDashboardData();
                    
                    if (refreshCount >= maxRefreshes) {
                        clearInterval(refreshInterval);
                        console.log('✅ Auto-refresh completed');
                    }
                }, 5000);
                
                // First immediate refresh after 3 seconds
                setTimeout(async () => {
                    console.log('🔄 Initial refresh after delegate...');
                    await updateDashboardData();
                }, 3000);
                
            } catch (error) {
                showDashTxStatus('error', 'Помилка: ' + error.message);
            }
        }

        async function executeDashUndelegate() {
            const amount = parseFloat(document.getElementById('dashUndelegateAmount').value);
            
            if (!amount || amount < 0.1) {
                alert('Мінімальна сума: 0.1 TICS');
                return;
            }

            if (!confirm(`Розділегувати ${amount} TICS? Період очікування: 14 днів`)) {
                return;
            }

            try {
                showDashTxStatus('processing', 'Обробка транзакції...');
                
                const result = await cosmosStaking.undelegate(amount, 'Undelegation via QubeNode.space');
                
                showDashTxStatus('success', `Успішно! TX: ${result.txHash}. Очікуйте 14 днів.`);
                
                // Clear input field immediately
                document.getElementById('dashUndelegateAmount').value = '';
                
                // Refresh every 5 seconds for 30 seconds (6 times)
                let refreshCount = 0;
                const maxRefreshes = 6;
                const refreshInterval = setInterval(async () => {
                    refreshCount++;
                    console.log(`🔄 Auto-refresh #${refreshCount} after undelegate...`);
                    await updateDashboardData();
                    
                    if (refreshCount >= maxRefreshes) {
                        clearInterval(refreshInterval);
                        console.log('✅ Auto-refresh completed');
                    }
                }, 5000);
                
                // First immediate refresh after 3 seconds
                setTimeout(async () => {
                    console.log('🔄 Initial refresh after undelegate...');
                    await updateDashboardData();
                }, 3000);
                
            } catch (error) {
                showDashTxStatus('error', 'Помилка: ' + error.message);
            }
        }

        async function executeDashClaim() {
            try {
                showDashTxStatus('processing', 'Обробка транзакції...');
                
                const result = await cosmosStaking.claimRewards('Rewards claim via QubeNode.space');
                
                showDashTxStatus('success', `Винагороду отримано! TX: ${result.txHash}`);
                
                // Refresh every 5 seconds for 30 seconds (6 times)
                let refreshCount = 0;
                const maxRefreshes = 6;
                const refreshInterval = setInterval(async () => {
                    refreshCount++;
                    console.log(`🔄 Auto-refresh #${refreshCount} after claim rewards...`);
                    await updateDashboardData();
                    
                    if (refreshCount >= maxRefreshes) {
                        clearInterval(refreshInterval);
                        console.log('✅ Auto-refresh completed');
                    }
                }, 5000);
                
                // First immediate refresh after 3 seconds
                setTimeout(async () => {
                    console.log('🔄 Initial refresh after claim rewards...');
                    await updateDashboardData();
                }, 3000);
                
            } catch (error) {
                showDashTxStatus('error', 'Помилка: ' + error.message);
            }
        }

        function showDashTxStatus(type, message) {
            const statusDiv = document.getElementById('dashTxStatus');
            statusDiv.style.display = 'block';
            
            let bgColor, borderColor, textColor;
            
            if (type === 'processing') {
                bgColor = 'rgba(59, 130, 246, 0.1)';
                borderColor = 'rgba(59, 130, 246, 0.4)';
                textColor = '#3b82f6';
            } else if (type === 'success') {
                bgColor = 'rgba(34, 197, 94, 0.1)';
                borderColor = 'rgba(34, 197, 94, 0.4)';
                textColor = '#22c55e';
            } else {
                bgColor = 'rgba(239, 68, 68, 0.1)';
                borderColor = 'rgba(239, 68, 68, 0.4)';
                textColor = '#ef4444';
            }
            
            statusDiv.style.background = bgColor;
            statusDiv.style.border = '2px solid ' + borderColor;
            statusDiv.style.color = textColor;
            statusDiv.innerHTML = message;
            
            if (type !== 'processing') {
                setTimeout(() => {
                    statusDiv.style.display = 'none';
                }, 5000);
            }
        }

        function disconnectDashboard() {
            if (confirm('Відключити гаманець?')) {
                if (cosmosStaking) {
                    cosmosStaking.disconnect();
                }
                
                // Hide dashboard
                const dashboard = document.getElementById('delegatorDashboard');
                if (dashboard) {
                    dashboard.style.display = 'none';
                }
                
                // Show wallet selection
                const stakingInterface = document.getElementById('stakingInterface');
                if (stakingInterface) {
                    stakingInterface.style.display = 'block';
                }
                
                // Make sure wallet section is visible
                const walletSection = document.getElementById('walletSection');
                if (walletSection) {
                    walletSection.style.display = 'block';
                }
                
                // HIDE old wallet status and actions
                const walletStatus = document.getElementById('walletStatus');
                const stakingActions = document.getElementById('stakingActions');
                if (walletStatus) walletStatus.style.display = 'none';
                if (stakingActions) stakingActions.style.display = 'none';
                
                // Reset wallet buttons
                const keplrBtn = document.getElementById('connectKeplrBtn');
                const cosmostationBtn = document.getElementById('connectCosmostationBtn');
                if (keplrBtn) {
                    keplrBtn.disabled = false;
                    keplrBtn.innerHTML = '<span style="font-size: 1.3em;">🔷</span><span>Keplr Wallet</span>';
                }
                if (cosmostationBtn) {
                    cosmostationBtn.disabled = false;
                    cosmostationBtn.innerHTML = '<span style="font-size: 1.3em;">🔶</span><span>Cosmostation</span>';
                }
                
                // Reset header
                headerWalletConnected = false;
                resetHeaderWalletButton();
            }
        }

        // Update Delegations List
        async function updateDelegationsList(overview) {
            const container = document.getElementById('dashDelegationsList');
            
            if (!overview.delegations || overview.delegations.length === 0) {
                container.innerHTML = `
                    <div style="padding: 30px; text-align: center; background: rgba(0, 212, 255, 0.05); border: 1px solid rgba(0, 212, 255, 0.2); border-radius: 12px;">
                        <div style="font-size: 3em; margin-bottom: 10px;">🎯</div>
                        <div style="color: #00FFF0; font-size: 1.2em; font-weight: 600; margin-bottom: 8px;">Почніть стейкінг!</div>
                        <p style="color: #94a3b8; font-size: 0.9em; margin-bottom: 0;">Делегуйте $TICS валідатору QubeNode та отримуйте 28.5% APY</p>
                    </div>
                `;
                return;
            }
            
            let html = '<div style="display: flex; flex-direction: column; gap: 12px;">';
            
            overview.delegations.forEach(del => {
                const amount = cosmosStaking.formatTics(del.balance.amount);
                const valAddress = del.delegation.validator_address;
                const validatorName = validatorNamesCache[valAddress] || valAddress.substring(0, 20) + '...';
                
                // Get rewards for this specific validator
                let validatorRewards = '0.00';
                if (overview.rewards && overview.rewards.rewards) {
                    const rewardEntry = overview.rewards.rewards.find(r => r.validator_address === valAddress);
                    if (rewardEntry && rewardEntry.reward && rewardEntry.reward.length > 0) {
                        const ticsReward = rewardEntry.reward.find(r => r.denom === 'tics');
                        if (ticsReward) {
                            validatorRewards = (parseFloat(ticsReward.amount) / 1e18).toFixed(2);
                        }
                    }
                }
                
                // Short address format
                const shortAddress = valAddress.substring(0, 12) + '...' + valAddress.substring(valAddress.length - 6);
                
                // Check if QubeNode
                const isQubeNode = valAddress === 'qubeticsvaloper1tzk9f84cv2gmk3du3m9dpxcuph70sfj6uf6kld';
                
                html += `
                    <div style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(99, 102, 241, 0.05)); border: 1px solid rgba(168, 85, 247, 0.3); border-radius: 12px; padding: 14px;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                            <div style="flex: 1;">
                                <div style="color: #a855f7; font-weight: 700; font-size: 1em; margin-bottom: 4px;">${validatorName}</div>
                                <div style="color: #64748b; font-size: 0.75em; font-family: monospace;">${shortAddress}</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 12px; margin-bottom: 10px; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 120px; background: rgba(168, 85, 247, 0.1); border-radius: 8px; padding: 8px;">
                                <div style="color: #94a3b8; font-size: 0.7em; margin-bottom: 2px;">Делеговано</div>
                                <div style="color: #c084fc; font-size: 1em; font-weight: 700;">${parseFloat(amount).toFixed(2)} TICS</div>
                            </div>
                            <div style="flex: 1; min-width: 120px; background: rgba(250, 204, 21, 0.1); border-radius: 8px; padding: 8px;">
                                <div style="color: #94a3b8; font-size: 0.7em; margin-bottom: 2px;">Винагороди</div>
                                <div style="color: #facc15; font-size: 1em; font-weight: 700;">${validatorRewards} TICS</div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 6px; flex-wrap: wrap;">
                            <button onclick="quickStakeMore('${valAddress}')" style="flex: 1; min-width: 100px; padding: 8px 12px; background: rgba(0, 212, 255, 0.15); border: 1px solid rgba(0, 212, 255, 0.4); border-radius: 8px; color: #00D4FF; font-size: 0.85em; font-weight: 600; cursor: pointer;">
                                Stake more
                            </button>
                            <button onclick="quickSwitchValidator('${valAddress}')" style="flex: 1; min-width: 100px; padding: 8px 12px; background: rgba(168, 85, 247, 0.15); border: 1px solid rgba(168, 85, 247, 0.4); border-radius: 8px; color: #a855f7; font-size: 0.85em; font-weight: 600; cursor: pointer;">
                                Switch Validator
                            </button>
                            <button onclick="quickUnbond('${valAddress}')" style="flex: 1; min-width: 100px; padding: 8px 12px; background: rgba(239, 68, 68, 0.15); border: 1px solid rgba(239, 68, 68, 0.4); border-radius: 8px; color: #ef4444; font-size: 0.85em; font-weight: 600; cursor: pointer;">
                                Unbond
                            </button>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
            
            // Update redelegate dropdowns
            updateRedelegateDropdowns(overview);
        }

                // Update Rewards Forecast
        async function updateRewardsForecast(overview) {
            try {
                const delegated = cosmosStaking.formatTics(overview.totalDelegated);
                const amount = parseFloat(delegated);
                
                if (amount === 0) {
                    document.getElementById('forecastDaily').textContent = '0.00';
                    document.getElementById('forecastWeekly').textContent = '0.00';
                    document.getElementById('forecastMonthly').textContent = '0.00';
                    document.getElementById('forecastYearly').textContent = '0.00';
                    return;
                }
                
                // APY 30%, but with 5% commission = 28.5% for user
                const APY = 0.285;
                
                const dailyReward = (amount * APY) / 365;
                const weeklyReward = (amount * APY) / 52;
                const monthlyReward = (amount * APY) / 12;
                const yearlyReward = amount * APY;
                
                document.getElementById('forecastDaily').textContent = dailyReward.toFixed(2);
                document.getElementById('forecastWeekly').textContent = weeklyReward.toFixed(2);
                document.getElementById('forecastMonthly').textContent = monthlyReward.toFixed(2);
                document.getElementById('forecastYearly').textContent = yearlyReward.toFixed(2);
            } catch (error) {
                console.error('Error updating rewards forecast:', error);
            }
        }

        // Update Redelegate Dropdowns
        async function updateRedelegateDropdowns(overview) {
            // Store user's delegations for FROM selector
            if (overview.delegations && overview.delegations.length > 0) {
                overview.delegations.forEach(del => {
                    const valAddress = del.delegation.validator_address;
                    if (valAddress === 'qubeticsvaloper1tzk9f84cv2gmk3du3m9dpxcuph70sfj6uf6kld') {
                        validatorNamesCache[valAddress] = 'QubeNode 🏆';
                    }
                });
            }
            
            // Fetch ALL active validators for TO selector
            try {
                allValidators = await cosmosStaking.chainClient.getAllValidators();
                
                if (allValidators && allValidators.length > 0) {
                    // Cache all validator names
                    allValidators.forEach(validator => {
                        const valAddress = validator.operator_address;
                        let valName = validator.description?.moniker || valAddress.substring(0, 15) + '...';
                        
                        if (valAddress === 'qubeticsvaloper1tzk9f84cv2gmk3du3m9dpxcuph70sfj6uf6kld') {
                            valName = 'QubeNode 🏆';
                        }
                        
                        validatorNamesCache[valAddress] = valName;
                    });
                    
                    console.log(`✅ Loaded ${allValidators.length} validators`);
                }
            } catch (error) {
                console.error('Error loading validators:', error);
            }
        }

        function openValidatorModal(mode) {
            validatorModalMode = mode;
            const modal = document.getElementById('validatorSelectorModal');
            const title = document.getElementById('validatorModalTitle');
            const container = document.getElementById('validatorListContainer');
            
            if (mode === 'from') {
                title.textContent = 'З якого валідатора';
                // Show only user's delegations
                const overview = cosmosStaking.getStakingOverview();
                if (!overview || !overview.delegations || overview.delegations.length === 0) {
                    container.innerHTML = '<div style="padding: 20px; text-align: center; color: #94a3b8;">Немає делегувань</div>';
                } else {
                    let html = '';
                    overview.delegations.forEach(del => {
                        const valAddress = del.delegation.validator_address;
                        const valName = validatorNamesCache[valAddress] || valAddress.substring(0, 20) + '...';
                        const amount = cosmosStaking.formatTics(del.balance.amount);
                        const shortAddress = valAddress.substring(0, 20) + '...' + valAddress.substring(valAddress.length - 6);
                        
                        html += `
                            <div onclick="selectValidator('${valAddress}', '${valName.replace(/'/g, "\\'")}', 'from')" style="background: rgba(0, 212, 255, 0.05); border: 2px solid rgba(0, 212, 255, 0.2); border-radius: 10px; padding: 15px; cursor: pointer; transition: all 0.3s; display: flex; justify-content: space-between; align-items: center;" onmouseover="this.style.background='rgba(0, 212, 255, 0.15)'" onmouseout="this.style.background='rgba(0, 212, 255, 0.05)'">
                                <div style="flex: 1;">
                                    <div style="color: #00FFF0; font-weight: 700; font-size: 1.05em; margin-bottom: 5px;">${valName}</div>
                                    <div style="color: #64748b; font-size: 0.8em;">${shortAddress}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="color: #00D4FF; font-weight: 700; font-size: 1.1em;">${parseFloat(amount).toFixed(2)}</div>
                                    <div style="color: #86efac; font-size: 0.8em;">TICS</div>
                                </div>
                            </div>
                        `;
                    });
                    container.innerHTML = html;
                }
            } else {
                title.textContent = 'Кому делегувати';
                // Show all validators
                if (!allValidators || allValidators.length === 0) {
                    container.innerHTML = '<div style="padding: 20px; text-align: center; color: #94a3b8;">Завантаження валідаторів...</div>';
                } else {
                    let html = '';
                    allValidators.forEach(validator => {
                        const valAddress = validator.operator_address;
                        const valName = validatorNamesCache[valAddress] || valAddress.substring(0, 20) + '...';
                        const shortAddress = valAddress.substring(0, 20) + '...' + valAddress.substring(valAddress.length - 6);
                        const commission = validator.commission?.commission_rates?.rate 
                            ? (parseFloat(validator.commission.commission_rates.rate) * 100).toFixed(2) 
                            : '0.00';
                        
                        html += `
                            <div onclick="selectValidator('${valAddress}', '${valName.replace(/'/g, "\\'")}', 'to')" style="background: rgba(0, 212, 255, 0.05); border: 2px solid rgba(0, 212, 255, 0.2); border-radius: 10px; padding: 15px; cursor: pointer; transition: all 0.3s; display: flex; justify-content: space-between; align-items: center;" onmouseover="this.style.background='rgba(0, 212, 255, 0.15)'" onmouseout="this.style.background='rgba(0, 212, 255, 0.05)'">
                                <div style="flex: 1;">
                                    <div style="color: #00FFF0; font-weight: 700; font-size: 1.05em; margin-bottom: 5px;">${valName}</div>
                                    <div style="color: #64748b; font-size: 0.8em;">${shortAddress}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="color: #94a3b8; font-weight: 600; font-size: 0.8em; margin-bottom: 2px;">Commission</div>
                                    <div style="color: #22c55e; font-weight: 700; font-size: 1.1em;">${commission}%</div>
                                </div>
                            </div>
                        `;
                    });
                    container.innerHTML = html;
                }
            }
            
            openModal('validatorSelectorModal');
        }

        function selectValidator(address, name, mode) {
            if (mode === 'from') {
                document.getElementById('dashRedelegateFrom').value = address;
                document.getElementById('fromValidatorText').textContent = name;
            } else {
                document.getElementById('dashRedelegateTo').value = address;
                document.getElementById('toValidatorText').textContent = name;
            }
            closeModal('validatorSelectorModal');
        }

        // Execute Redelegate
        async function executeDashRedelegate() {
            const fromValidator = document.getElementById('dashRedelegateFrom').value;
            const toValidator = document.getElementById('dashRedelegateTo').value;
            const amount = parseFloat(document.getElementById('dashRedelegateAmount').value);
            
            if (!fromValidator) {
                alert('Оберіть валідатора з якого ределегувати');
                return;
            }
            
            if (!toValidator) {
                alert('Оберіть валідатора кому ределегувати');
                return;
            }
            
            if (fromValidator === toValidator) {
                alert('Не можна ределегувати на того самого валідатора');
                return;
            }
            
            if (!amount || amount < 0.1) {
                alert('Мінімальна сума: 0.1 TICS');
                return;
            }
            
            if (!confirm(`Ределегувати ${amount} TICS?`)) {
                return;
            }

            try {
                showDashTxStatus('processing', 'Обробка транзакції...');
                
                const result = await cosmosStaking.redelegate(fromValidator, toValidator, amount, 'Redelegation via QubeNode.space');
                
                showDashTxStatus('success', `Успішно! TX: ${result.txHash}`);
                
                // Aggressive refresh for redelegate - API is slow to update
                // Clear input field immediately
                document.getElementById('dashRedelegateAmount').value = '';
                
                // Refresh every 5 seconds for 60 seconds (12 times total)
                let refreshCount = 0;
                const maxRefreshes = 12;
                const refreshInterval = setInterval(async () => {
                    refreshCount++;
                    console.log(`🔄 Auto-refresh #${refreshCount} after redelegate...`);
                    await updateDashboardData();
                    
                    if (refreshCount >= maxRefreshes) {
                        clearInterval(refreshInterval);
                        console.log('✅ Auto-refresh completed');
                    }
                }, 5000); // Every 5 seconds
                
                // First immediate refresh after 3 seconds
                setTimeout(async () => {
                    console.log('🔄 Initial refresh after redelegate...');
                    await updateDashboardData();
                }, 3000);
                
            } catch (error) {
                showDashTxStatus('error', 'Помилка: ' + error.message);
            }
        }

        async function updateStakingData() {
            try {
                const overview = await cosmosStaking.refresh();
                
                const balance = cosmosStaking.formatTics(overview.balance);
                const delegated = cosmosStaking.formatTics(overview.totalDelegated);
                const rewards = cosmosStaking.formatTics(overview.totalRewards);

                document.getElementById('walletBalance').textContent = parseFloat(balance).toFixed(2);
                document.getElementById('walletDelegated').textContent = parseFloat(delegated).toFixed(2);
                document.getElementById('walletRewards').textContent = parseFloat(rewards).toFixed(4);
                document.getElementById('claimableRewards').textContent = parseFloat(rewards).toFixed(4);
            } catch (error) {
                console.error('Error updating staking data:', error);
            }
        }

        function showStakingTab(tab) {
            document.querySelectorAll('.staking-tab').forEach(btn => {
                btn.style.background = 'transparent';
                btn.style.color = '#94a3b8';
            });
            document.querySelectorAll('.staking-tab-content').forEach(content => {
                content.style.display = 'none';
            });

            document.getElementById('tab' + tab.charAt(0).toUpperCase() + tab.slice(1)).style.background = 'rgba(0, 212, 255, 0.2)';
            document.getElementById('tab' + tab.charAt(0).toUpperCase() + tab.slice(1)).style.color = '#00FFF0';
            document.getElementById(tab + 'Tab').style.display = 'block';
        }

        async function executeDelegate() {
            const amount = parseFloat(document.getElementById('delegateAmount').value);
            
            if (!amount || amount < 0.1) {
                alert('Мінімальна сума делегування: 0.1 TICS');
                return;
            }

            try {
                showTxStatus('processing', 'Обробка транзакції...');
                
                const result = await cosmosStaking.delegate(amount, 'Delegation via QubeNode.space');
                
                showTxStatus('success', `Успішно! TX: ${result.txHash}`);
                
                setTimeout(async () => {
                    await updateStakingData();
                    document.getElementById('delegateAmount').value = '';
                }, 2000);
                
            } catch (error) {
                showTxStatus('error', 'Помилка: ' + error.message);
            }
        }

        async function executeUndelegate() {
            const amount = parseFloat(document.getElementById('undelegateAmount').value);
            
            if (!amount || amount < 0.1) {
                alert('Мінімальна сума: 0.1 TICS');
                return;
            }

            if (!confirm(`Розділегувати ${amount} TICS? Період очікування: 14 днів`)) {
                return;
            }

            try {
                showTxStatus('processing', 'Обробка транзакції...');
                
                const result = await cosmosStaking.undelegate(amount, 'Undelegation via QubeNode.space');
                
                showTxStatus('success', `Успішно! TX: ${result.txHash}. Очікуйте 14 днів.`);
                
                setTimeout(async () => {
                    await updateStakingData();
                    document.getElementById('undelegateAmount').value = '';
                }, 2000);
                
            } catch (error) {
                showTxStatus('error', 'Помилка: ' + error.message);
            }
        }

        async function executeClaim() {
            try {
                showTxStatus('processing', 'Обробка транзакції...');
                
                const result = await cosmosStaking.claimRewards('Rewards claim via QubeNode.space');
                
                showTxStatus('success', `Винагороду отримано! TX: ${result.txHash}`);
                
                setTimeout(async () => {
                    await updateStakingData();
                }, 2000);
                
            } catch (error) {
                showTxStatus('error', 'Помилка: ' + error.message);
            }
        }

        function showTxStatus(type, message) {
            const statusDiv = document.getElementById('txStatus');
            statusDiv.style.display = 'block';
            
            let bgColor, borderColor, textColor;
            
            if (type === 'processing') {
                bgColor = 'rgba(59, 130, 246, 0.1)';
                borderColor = 'rgba(59, 130, 246, 0.4)';
                textColor = '#3b82f6';
            } else if (type === 'success') {
                bgColor = 'rgba(34, 197, 94, 0.1)';
                borderColor = 'rgba(34, 197, 94, 0.4)';
                textColor = '#22c55e';
            } else {
                bgColor = 'rgba(239, 68, 68, 0.1)';
                borderColor = 'rgba(239, 68, 68, 0.4)';
                textColor = '#ef4444';
            }
            
            statusDiv.style.background = bgColor;
            statusDiv.style.border = '2px solid ' + borderColor;
            statusDiv.style.color = textColor;
            statusDiv.innerHTML = message;
            
            if (type !== 'processing') {
                setTimeout(() => {
                    statusDiv.style.display = 'none';
                }, 5000);
            }
        }

        // Header Wallet Button Functions
        let headerWalletConnected = false;
        let allValidators = []; // Store all validators with names
        let validatorModalMode = ''; // 'from' or 'to'
        let validatorNamesCache = {}; // Cache validator names by address

        function toggleHeaderWalletDropdown(event) {
            if (event) event.stopPropagation();
            
            const dropdown = document.getElementById('headerWalletDropdown');
            if (dropdown) {
                dropdown.classList.toggle('show');
            }
        }

        async function connectHeaderWallet(walletType) {
            const dropdown = document.getElementById('headerWalletDropdown');
            if (dropdown) dropdown.classList.remove('show');
            
            const headerBtn = document.getElementById('headerWalletBtn');
            if (headerBtn) {
                headerBtn.innerHTML = '<span>⏳</span><span>Підключення...</span>';
                headerBtn.style.pointerEvents = 'none';
            }
            
            try {
                await initializeStaking();
                const result = await cosmosStaking.connectWallet(walletType);
                
                if (result.success) {
                    headerWalletConnected = true;
                    await updateHeaderWalletDisplay();
                    
                    // Hide wallet connection buttons in modal
                    const walletSection = document.getElementById('walletSection');
                    const walletStatus = document.getElementById('walletStatus');
                    const stakingActions = document.getElementById('stakingActions');
                    const dashboard = document.getElementById('delegatorDashboard');
                    
                    if (walletSection) walletSection.style.display = 'none';
                    if (walletStatus) walletStatus.style.display = 'none';
                    if (stakingActions) stakingActions.style.display = 'none';
                    
                    // Show dashboard in modal (way 3)
                    if (dashboard) {
                        dashboard.style.display = 'block';
                        await updateDashboardData();
                    }
                }
            } catch (error) {
                console.error('Header wallet connection error:', error);
                alert('Помилка підключення: ' + error.message);
                resetHeaderWalletButton();
            } finally {
                if (headerBtn) headerBtn.style.pointerEvents = 'auto';
            }
        }

        async function updateHeaderWalletDisplay() {
            try {
                const overview = await cosmosStaking.refresh();
                const walletInfo = cosmosStaking.getWalletInfo();
                
                const balance = cosmosStaking.formatTics(overview.balance);
                const formattedBalance = parseFloat(balance).toFixed(2);
                
                // Shorten address: first 8 and last 6 characters
                const address = walletInfo.address;
                const shortAddress = address.substring(0, 8) + '...' + address.substring(address.length - 6);
                
                const headerBtn = document.getElementById('headerWalletBtn');
                headerBtn.innerHTML = `
                    <span>💼</span>
                    <div class="wallet-info">
                        <div class="wallet-address">${shortAddress}</div>
                        <div class="wallet-balance">${formattedBalance} TICS</div>
                    </div>
                `;
                headerBtn.classList.add('wallet-connected');
                
                // Update dropdown options for connected state
                const dropdown = document.getElementById('headerWalletDropdown');
                if (dropdown) {
                    dropdown.innerHTML = `
                        <button class="wallet-option" onclick="openModal('delegatorModal'); event.stopPropagation();">
                            <span>📊</span>
                            <span>Переглянути дашборд</span>
                        </button>
                        <button class="wallet-option" onclick="disconnectHeaderWallet(); event.stopPropagation();" style="background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.3); color: #ef4444;">
                            <span>🔌</span>
                            <span>Відключити гаманець</span>
                        </button>
                    `;
                }
                
                // Update mobile button too
                updateMobileWalletButton();
            } catch (error) {
                console.error('Error updating header wallet display:', error);
                resetHeaderWalletButton();
            }
        }

        function resetHeaderWalletButton() {
            headerWalletConnected = false;
            const headerBtn = document.getElementById('headerWalletBtn');
            headerBtn.innerHTML = `
                <span>💼</span>
                <span>Підключити гаманець</span>
            `;
            headerBtn.classList.remove('wallet-connected');
            
            // Restore dropdown to wallet selection
            const dropdown = document.getElementById('headerWalletDropdown');
            if (dropdown) {
                dropdown.classList.remove('show');
                dropdown.innerHTML = `
                    <button class="wallet-option" onclick="connectHeaderWallet('keplr'); event.stopPropagation();">
                        <span>🔷</span>
                        <span>Keplr</span>
                    </button>
                    <button class="wallet-option" onclick="connectHeaderWallet('cosmostation'); event.stopPropagation();">
                        <span>🔶</span>
                        <span>Cosmostation</span>
                    </button>
                `;
            }
            
            // Reset mobile button too
            updateMobileWalletButton();
        }

        function disconnectHeaderWallet() {
            if (confirm('Відключити гаманець?')) {
                if (cosmosStaking) {
                    cosmosStaking.disconnect();
                }
                resetHeaderWalletButton();
                
                // Reset ALL modal sections completely
                const dashboard = document.getElementById('delegatorDashboard');
                const stakingInterface = document.getElementById('stakingInterface');
                const walletSection = document.getElementById('walletSection');
                const walletStatus = document.getElementById('walletStatus');
                const stakingActions = document.getElementById('stakingActions');
                
                if (dashboard) dashboard.style.display = 'none';
                if (stakingInterface) stakingInterface.style.display = 'block';
                if (walletSection) walletSection.style.display = 'block';
                
                // HIDE old wallet status and staking actions
                if (walletStatus) walletStatus.style.display = 'none';
                if (stakingActions) stakingActions.style.display = 'none';
                
                // Reset wallet buttons
                const keplrBtn = document.getElementById('connectKeplrBtn');
                const cosmostationBtn = document.getElementById('connectCosmostationBtn');
                if (keplrBtn) {
                    keplrBtn.disabled = false;
                    keplrBtn.innerHTML = '<span style="font-size: 1.3em;">🔷</span><span>Keplr Wallet</span>';
                }
                if (cosmostationBtn) {
                    cosmostationBtn.disabled = false;
                    cosmostationBtn.innerHTML = '<span style="font-size: 1.3em;">🔶</span><span>Cosmostation</span>';
                }
                
                const dropdown = document.getElementById('headerWalletDropdown');
                if (dropdown) {
                    dropdown.classList.remove('show');
                }
            }
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('headerWalletDropdown');
            const headerBtn = document.getElementById('headerWalletBtn');
            
            if (dropdown && headerBtn && !headerBtn.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        // Mobile wallet button handler
        function handleMobileWalletClick() {
            // Close mobile menu
            const hamburger = document.querySelector('.hamburger');
            const mobileMenu = document.querySelector('.mobile-menu');
            if (hamburger) hamburger.classList.remove('active');
            if (mobileMenu) mobileMenu.style.left = '-100%';
            
            // If already connected, open delegator modal
            if (headerWalletConnected) {
                setTimeout(() => openModal('delegatorModal'), 300);
                return;
            }
            
            // Show wallet selection
            const walletChoice = confirm('Оберіть гаманець:\n\nНатисніть OK для Keplr\nНатисніть Скасувати для Cosmostation');
            const walletType = walletChoice ? 'keplr' : 'cosmostation';
            
            connectHeaderWallet(walletType);
        }

        // Update mobile wallet button display
        function updateMobileWalletButton() {
            const mobileBtn = document.getElementById('mobileWalletBtn');
            if (!mobileBtn) return;
            
            if (headerWalletConnected && cosmosStaking) {
                const walletInfo = cosmosStaking.getWalletInfo();
                const address = walletInfo.address;
                const shortAddress = address.substring(0, 8) + '...' + address.substring(address.length - 6);
                
                mobileBtn.innerHTML = `
                    <span>💼</span>
                    <span>${shortAddress}</span>
                `;
                mobileBtn.style.background = 'rgba(34, 197, 94, 0.2)';
                mobileBtn.style.borderColor = 'rgba(34, 197, 94, 0.4)';
            } else {
                mobileBtn.innerHTML = `
                    <span>💼</span>
                    <span>Підключити гаманець</span>
                `;
                mobileBtn.style.background = '';
                mobileBtn.style.borderColor = '';
            }
        }

        // Check if wallet was connected in modal and update header
        const originalConnectWallet = connectWallet;
        async function connectWallet(walletType) {
            await originalConnectWallet(walletType);
            if (cosmosStaking && cosmosStaking.isWalletConnected()) {
                headerWalletConnected = true;
                await updateHeaderWalletDisplay();
            }
        }

        // Check if wallet gets disconnected in modal and update header
        const originalDisconnectWallet = disconnectWallet;
        async function disconnectWallet() {
            await originalDisconnectWallet();
            resetHeaderWalletButton();
        }

    </script>


    </script>

    <!-- Cosmos Staking Module Integration - Load in correct order -->
    <script src="chain-config.js"></script>
    <script src="wallet-manager.js"></script>
    <script src="chain-client.js"></script>
    <script src="transaction-builder.js"></script>
    <script src="staking-service.js"></script>
    <script src="cosmos-staking.js"></script>
    <script src="sync.js"></script>
</body>
</html>