<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Wallet Test - QubeNode</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            padding: 20px;
            line-height: 1.6;
        }
        .header {
            text-align: center;
            padding: 20px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .status {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .status-item {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .status-item:last-child {
            border-bottom: none;
        }
        .yes { color: #00ff88; }
        .no { color: #ff4444; }
        button {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px;
            border: 2px solid #00d4ff;
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            cursor: pointer;
            transition: all 0.3s;
        }
        button:active {
            transform: scale(0.98);
            background: rgba(0, 212, 255, 0.3);
        }
        .log {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #333;
        }
        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid #222;
        }
        .log-success { color: #00ff88; }
        .log-error { color: #ff4444; }
        .log-info { color: #00d4ff; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîß Mobile Wallet Debug</h1>
        <p>QubeNode - –¢–µ—Å—Ç –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è</p>
    </div>

    <div class="status">
        <h3>üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏:</h3>
        <div class="status-item">
            –öeplr: <span id="keplrStatus" class="no">‚ùå –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞...</span>
        </div>
        <div class="status-item">
            Cosmostation: <span id="cosmostationStatus" class="no">‚ùå –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞...</span>
        </div>
        <div class="status-item">
            –ü—Ä–∏—Å—Ç—Ä—ñ–π: <span id="deviceType">üì± –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞...</span>
        </div>
        <div class="status-item">
            User Agent: <span id="userAgent" style="font-size: 10px; word-break: break-all;"></span>
        </div>
    </div>

    <button onclick="testDetection()">üîç –í–∏–∑–Ω–∞—á–∏—Ç–∏ –≥–∞–º–∞–Ω–µ—Ü—å</button>
    <button onclick="testKeplrConnection()">üî∑ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ Keplr</button>
    <button onclick="testCosmostationConnection()">üü£ –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ Cosmostation</button>
    <button onclick="clearLog()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ –ª–æ–≥</button>

    <div class="status">
        <h3>üìù –õ–æ–≥ –ø–æ–¥—ñ–π:</h3>
        <div class="log" id="log"></div>
    </div>

    <script>
        // Initialize
        let logEntries = [];

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const entry = `[${timestamp}] ${message}`;
            logEntries.push({ message: entry, type });
            
            const logDiv = document.getElementById('log');
            const entryDiv = document.createElement('div');
            entryDiv.className = `log-entry log-${type}`;
            entryDiv.textContent = entry;
            logDiv.appendChild(entryDiv);
            logDiv.scrollTop = logDiv.scrollHeight;
            
            console.log(message);
        }

        function clearLog() {
            logEntries = [];
            document.getElementById('log').innerHTML = '';
            log('–õ–æ–≥ –æ—á–∏—â–µ–Ω–æ', 'info');
        }

        // Check on load
        window.addEventListener('load', () => {
            log('–°—Ç–æ—Ä—ñ–Ω–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞', 'success');
            checkWallets();
        });

        function checkWallets() {
            // Device type
            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
            document.getElementById('deviceType').textContent = isMobile ? 'üì± –ú–æ–±—ñ–ª—å–Ω–∏–π' : 'üíª –î–µ—Å–∫—Ç–æ–ø';
            document.getElementById('userAgent').textContent = navigator.userAgent;
            
            log(`–¢–∏–ø –ø—Ä–∏—Å—Ç—Ä–æ—é: ${isMobile ? '–ú–æ–±—ñ–ª—å–Ω–∏–π' : '–î–µ—Å–∫—Ç–æ–ø'}`, 'info');

            // Keplr
            if (window.keplr) {
                document.getElementById('keplrStatus').innerHTML = '<span class="yes">‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ</span>';
                log('Keplr –∑–Ω–∞–π–¥–µ–Ω–æ!', 'success');
            } else {
                document.getElementById('keplrStatus').innerHTML = '<span class="no">‚ùå –ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ</span>';
                log('Keplr –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ', 'error');
            }

            // Cosmostation
            if (window.cosmostation) {
                document.getElementById('cosmostationStatus').innerHTML = '<span class="yes">‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ</span>';
                log('Cosmostation –∑–Ω–∞–π–¥–µ–Ω–æ!', 'success');
            } else {
                document.getElementById('cosmostationStatus').innerHTML = '<span class="no">‚ùå –ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ</span>';
                log('Cosmostation –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ', 'error');
            }
        }

        function testDetection() {
            log('üîç –ü–æ—á–∞—Ç–æ–∫ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≥–∞–º–∞–Ω—Ü—è...', 'info');
            
            if (window.keplr) {
                log('‚úÖ –í–∏–∑–Ω–∞—á–µ–Ω–æ: Keplr', 'success');
                alert('–í–∏–∑–Ω–∞—á–µ–Ω–æ –≥–∞–º–∞–Ω–µ—Ü—å: Keplr\n\n–ú–æ–∂–Ω–∞ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—è!');
            } else if (window.cosmostation) {
                log('‚úÖ –í–∏–∑–Ω–∞—á–µ–Ω–æ: Cosmostation', 'success');
                alert('–í–∏–∑–Ω–∞—á–µ–Ω–æ –≥–∞–º–∞–Ω–µ—Ü—å: Cosmostation\n\n–ú–æ–∂–Ω–∞ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—è!');
            } else {
                log('‚ùå –ñ–æ–¥–Ω–æ–≥–æ –≥–∞–º–∞–Ω—Ü—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ', 'error');
                alert('‚ùå –ñ–æ–¥–Ω–æ–≥–æ –≥–∞–º–∞–Ω—Ü—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ\n\n–í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å–∞–π—Ç —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –≥–∞–º–∞–Ω—Ü—è');
            }
        }

        async function testKeplrConnection() {
            log('üî∑ –°–ø—Ä–æ–±–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Keplr...', 'info');
            
            if (!window.keplr) {
                log('‚ùå Keplr –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ', 'error');
                alert('Keplr –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!\n\n–í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å–∞–π—Ç —á–µ—Ä–µ–∑ Keplr –±—Ä–∞—É–∑–µ—Ä.');
                return;
            }

            try {
                log('–í–∏–∫–ª–∏–∫–∞—î–º–æ keplr.enable()...', 'info');
                await window.keplr.enable('qubetics_9030-1');
                log('‚úÖ Keplr –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!', 'success');
                
                const offlineSigner = window.keplr.getOfflineSigner('qubetics_9030-1');
                const accounts = await offlineSigner.getAccounts();
                
                if (accounts.length > 0) {
                    log(`‚úÖ –ê–¥—Ä–µ—Å–∞: ${accounts[0].address}`, 'success');
                    alert(`‚úÖ Keplr –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ!\n\n–ê–¥—Ä–µ—Å–∞: ${accounts[0].address.substring(0, 20)}...`);
                }
            } catch (error) {
                log(`‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}`, 'error');
                alert(`–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Keplr:\n\n${error.message}`);
            }
        }

        async function testCosmostationConnection() {
            log('üü£ –°–ø—Ä–æ–±–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Cosmostation...', 'info');
            
            if (!window.cosmostation) {
                log('‚ùå Cosmostation –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ', 'error');
                alert('Cosmostation –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!\n\n–í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å–∞–π—Ç —á–µ—Ä–µ–∑ Cosmostation –±—Ä–∞—É–∑–µ—Ä.');
                return;
            }

            try {
                log('–û—Ç—Ä–∏–º—É—î–º–æ Keplr provider –≤—ñ–¥ Cosmostation...', 'info');
                const provider = window.cosmostation.providers.keplr;
                
                if (!provider) {
                    throw new Error('Cosmostation Keplr provider –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π');
                }

                log('–í–∏–∫–ª–∏–∫–∞—î–º–æ provider.enable()...', 'info');
                await provider.enable('qubetics_9030-1');
                log('‚úÖ Cosmostation –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!', 'success');
                
                const offlineSigner = provider.getOfflineSigner('qubetics_9030-1');
                const accounts = await offlineSigner.getAccounts();
                
                if (accounts.length > 0) {
                    log(`‚úÖ –ê–¥—Ä–µ—Å–∞: ${accounts[0].address}`, 'success');
                    alert(`‚úÖ Cosmostation –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ!\n\n–ê–¥—Ä–µ—Å–∞: ${accounts[0].address.substring(0, 20)}...`);
                }
            } catch (error) {
                log(`‚ùå –ü–æ–º–∏–ª–∫–∞: ${error.message}`, 'error');
                alert(`–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Cosmostation:\n\n${error.message}`);
            }
        }
    </script>
</body>
</html>
